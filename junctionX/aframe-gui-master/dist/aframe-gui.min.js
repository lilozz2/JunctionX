!function(t){function e(o){if(i[o])return i[o].exports;var r=i[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var i={};e.m=t,e.c=i,e.i=function(t){return t},e.d=function(t,i,o){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=18)}([function(t,e,i){"use strict";window.normalYPosition=1.5,window.hiddenYPosition=1e3,window.key_orange="#ed5b21",window.key_orange_light="#ef8c60",window.key_grey="#22252a",window.key_grey_dark="#2c3037",window.key_grey_light="#606876",window.key_offwhite="#d3d3d4",window.key_white="#fff",window.icon_font={alert:"","alert-circled":"","android-add":"","android-add-circle":"","android-alarm-clock":"","android-alert":"","android-apps":"","android-archive":"","android-arrow-back":"","android-arrow-down":"","android-arrow-dropdown":"","android-arrow-dropdown-circle":"","android-arrow-dropleft":"","android-arrow-dropleft-circle":"","android-arrow-dropright":"","android-arrow-dropright-circle":"","android-arrow-dropup":"","android-arrow-dropup-circle":"","android-arrow-forward":"","android-arrow-up":"","android-attach":"","android-bar":"","android-bicycle":"","android-boat":"","android-bookmark":"","android-bulb":"","android-bus":"","android-calendar":"","android-call":"","android-camera":"","android-cancel":"","android-car":"","android-cart":"","android-chat":"","android-checkbox":"","android-checkbox-blank":"","android-checkbox-outline":"","android-checkbox-outline-blank":"","android-checkmark-circle":"","android-clipboard":"","android-close":"","android-cloud":"","android-cloud-circle":"","android-cloud-done":"","android-cloud-outline":"","android-color-palette":"","android-compass":"","android-contact":"","android-contacts":"","android-contract":"","android-create":"","android-delete":"","android-desktop":"","android-document":"","android-done":"","android-done-all":"","android-download":"","android-drafts":"","android-exit":"","android-expand":"","android-favorite":"","android-favorite-outline":"","android-film":"","android-folder":"","android-folder-open":"","android-funnel":"","android-globe":"","android-hand":"","android-hangout":"","android-happy":"","android-home":"","android-image":"","android-laptop":"","android-list":"","android-locate":"","android-lock":"","android-mail":"","android-map":"","android-menu":"","android-microphone":"","android-microphone-off":"","android-more-horizontal":"","android-more-vertical":"","android-navigate":"","android-notifications":"","android-notifications-none":"","android-notifications-off":"","android-open":"","android-options":"","android-people":"","android-person":"","android-person-add":"","android-phone-landscape":"","android-phone-portrait":"","android-pin":"","android-plane":"","android-playstore":"","android-print":"","android-radio-button-off":"","android-radio-button-on":"","android-refresh":"","android-remove":"","android-remove-circle":"","android-restaurant":"","android-sad":"","android-search":"","android-send":"","android-settings":"","android-share":"","android-share-alt":"","android-star":"","android-star-half":"","android-star-outline":"","android-stopwatch":"","android-subway":"","android-sunny":"","android-sync":"","android-textsms":"","android-time":"","android-train":"","android-unlock":"","android-upload":"","android-volume-down":"","android-volume-mute":"","android-volume-off":"","android-volume-up":"","android-walk":"","android-warning":"","android-watch":"","android-wifi":"",aperture:"",archive:"","arrow-down-a":"","arrow-down-b":"","arrow-down-c":"","arrow-expand":"","arrow-graph-down-left":"","arrow-graph-down-right":"","arrow-graph-up-left":"","arrow-graph-up-right":"","arrow-left-a":"","arrow-left-b":"","arrow-left-c":"","arrow-move":"","arrow-resize":"","arrow-return-left":"","arrow-return-right":"","arrow-right-a":"","arrow-right-b":"","arrow-right-c":"","arrow-shrink":"","arrow-swap":"","arrow-up-a":"","arrow-up-b":"","arrow-up-c":"",asterisk:"",at:"",backspace:"","backspace-outline":"",bag:"","battery-charging":"","battery-empty":"","battery-full":"","battery-half":"","battery-low":"",beaker:"",beer:"",bluetooth:"",bonfire:"",bookmark:"",bowtie:"",briefcase:"",bug:"",calculator:"",calendar:"",camera:"",card:"",cash:"",chatbox:"","chatbox-working":"",chatboxes:"",chatbubble:"","chatbubble-working":"",chatbubbles:"",checkmark:"","checkmark-circled":"","checkmark-round":"","chevron-down":"","chevron-left":"","chevron-right":"","chevron-up":"",clipboard:"",clock:"",close:"","close-circled":"","close-round":"","closed-captioning":"",cloud:"",code:"","code-download":"","code-working":"",coffee:"",compass:"",compose:"","connection-bars":"",contrast:"",crop:"",cube:"",disc:"",document:"","document-text":"",drag:"",earth:"",easel:"",edit:"",egg:"",eject:"",email:"","email-unread":"","erlenmeyer-flask":"","erlenmeyer-flask-bubbles":"",eye:"","eye-disabled":"",female:"",filing:"","film-marker":"",fireball:"",flag:"",flame:"",flash:"","flash-off":"",folder:"",fork:"","fork-repo":"",forward:"",funnel:"","gear-a":"","gear-b":"",grid:"",hammer:"",happy:"","happy-outline":"",headphone:"",heart:"","heart-broken":"",help:"","help-buoy":"","help-circled":"",home:"",icecream:"",image:"",images:"",information:"","information-circled":"",ionic:"","ios-alarm":"","ios-alarm-outline":"","ios-albums":"","ios-albums-outline":"","ios-americanfootball":"","ios-americanfootball-outline":"","ios-analytics":"","ios-analytics-outline":"","ios-arrow-back":"","ios-arrow-down":"","ios-arrow-forward":"","ios-arrow-left":"","ios-arrow-right":"","ios-arrow-thin-down":"","ios-arrow-thin-left":"","ios-arrow-thin-right":"","ios-arrow-thin-up":"","ios-arrow-up":"","ios-at":"","ios-at-outline":"","ios-barcode":"","ios-barcode-outline":"","ios-baseball":"","ios-baseball-outline":"","ios-basketball":"","ios-basketball-outline":"","ios-bell":"","ios-bell-outline":"","ios-body":"","ios-body-outline":"","ios-bolt":"","ios-bolt-outline":"","ios-book":"","ios-book-outline":"","ios-bookmarks":"","ios-bookmarks-outline":"","ios-box":"","ios-box-outline":"","ios-briefcase":"","ios-briefcase-outline":"","ios-browsers":"","ios-browsers-outline":"","ios-calculator":"","ios-calculator-outline":"","ios-calendar":"","ios-calendar-outline":"","ios-camera":"","ios-camera-outline":"","ios-cart":"","ios-cart-outline":"","ios-chatboxes":"","ios-chatboxes-outline":"","ios-chatbubble":"","ios-chatbubble-outline":"","ios-checkmark":"","ios-checkmark-empty":"","ios-checkmark-outline":"","ios-circle-filled":"","ios-circle-outline":"","ios-clock":"","ios-clock-outline":"","ios-close":"","ios-close-empty":"","ios-close-outline":"","ios-cloud":"","ios-cloud-download":"","ios-cloud-download-outline":"","ios-cloud-outline":"","ios-cloud-upload":"","ios-cloud-upload-outline":"","ios-cloudy":"","ios-cloudy-night":"","ios-cloudy-night-outline":"","ios-cloudy-outline":"","ios-cog":"","ios-cog-outline":"","ios-color-filter":"","ios-color-filter-outline":"","ios-color-wand":"","ios-color-wand-outline":"","ios-compose":"","ios-compose-outline":"","ios-contact":"","ios-contact-outline":"","ios-copy":"","ios-copy-outline":"","ios-crop":"","ios-crop-strong":"","ios-download":"","ios-download-outline":"","ios-drag":"","ios-email":"","ios-email-outline":"","ios-eye":"","ios-eye-outline":"","ios-fastforward":"","ios-fastforward-outline":"","ios-filing":"","ios-filing-outline":"","ios-film":"","ios-film-outline":"","ios-flag":"","ios-flag-outline":"","ios-flame":"","ios-flame-outline":"","ios-flask":"","ios-flask-outline":"","ios-flower":"","ios-flower-outline":"","ios-folder":"","ios-folder-outline":"","ios-football":"","ios-football-outline":"","ios-game-controller-a":"","ios-game-controller-a-outline":"","ios-game-controller-b":"","ios-game-controller-b-outline":"","ios-gear":"","ios-gear-outline":"","ios-glasses":"","ios-glasses-outline":"","ios-grid-view":"","ios-grid-view-outline":"","ios-heart":"","ios-heart-outline":"","ios-help":"","ios-help-empty":"","ios-help-outline":"","ios-home":"","ios-home-outline":"","ios-infinite":"","ios-infinite-outline":"","ios-information":"","ios-information-empty":"","ios-information-outline":"","ios-ionic-outline":"","ios-keypad":"","ios-keypad-outline":"","ios-lightbulb":"","ios-lightbulb-outline":"","ios-list":"","ios-list-outline":"","ios-location":"","ios-location-outline":"","ios-locked":"","ios-locked-outline":"","ios-loop":"","ios-loop-strong":"","ios-medical":"","ios-medical-outline":"","ios-medkit":"","ios-medkit-outline":"","ios-mic":"","ios-mic-off":"","ios-mic-outline":"","ios-minus":"","ios-minus-empty":"","ios-minus-outline":"","ios-monitor":"","ios-monitor-outline":"","ios-moon":"","ios-moon-outline":"","ios-more":"","ios-more-outline":"","ios-musical-note":"","ios-musical-notes":"","ios-navigate":"","ios-navigate-outline":"","ios-nutrition":"","ios-nutrition-outline":"","ios-paper":"","ios-paper-outline":"","ios-paperplane":"","ios-paperplane-outline":"","ios-partlysunny":"","ios-partlysunny-outline":"","ios-pause":"","ios-pause-outline":"","ios-paw":"","ios-paw-outline":"","ios-people":"","ios-people-outline":"","ios-person":"","ios-person-outline":"","ios-personadd":"","ios-personadd-outline":"","ios-photos":"","ios-photos-outline":"","ios-pie":"","ios-pie-outline":"","ios-pint":"","ios-pint-outline":"","ios-play":"","ios-play-outline":"","ios-plus":"","ios-plus-empty":"","ios-plus-outline":"","ios-pricetag":"","ios-pricetag-outline":"","ios-pricetags":"","ios-pricetags-outline":"","ios-printer":"","ios-printer-outline":"","ios-pulse":"","ios-pulse-strong":"","ios-rainy":"","ios-rainy-outline":"","ios-recording":"","ios-recording-outline":"","ios-redo":"","ios-redo-outline":"","ios-refresh":"","ios-refresh-empty":"","ios-refresh-outline":"","ios-reload":"","ios-reverse-camera":"","ios-reverse-camera-outline":"","ios-rewind":"","ios-rewind-outline":"","ios-rose":"","ios-rose-outline":"","ios-search":"","ios-search-strong":"","ios-settings":"","ios-settings-strong":"","ios-shuffle":"","ios-shuffle-strong":"","ios-skipbackward":"","ios-skipbackward-outline":"","ios-skipforward":"","ios-skipforward-outline":"","ios-snowy":"","ios-speedometer":"","ios-speedometer-outline":"","ios-star":"","ios-star-half":"","ios-star-outline":"","ios-stopwatch":"","ios-stopwatch-outline":"","ios-sunny":"","ios-sunny-outline":"","ios-telephone":"","ios-telephone-outline":"","ios-tennisball":"","ios-tennisball-outline":"","ios-thunderstorm":"","ios-thunderstorm-outline":"","ios-time":"","ios-time-outline":"","ios-timer":"","ios-timer-outline":"","ios-toggle":"","ios-toggle-outline":"","ios-trash":"","ios-trash-outline":"","ios-undo":"","ios-undo-outline":"","ios-unlocked":"","ios-unlocked-outline":"","ios-upload":"","ios-upload-outline":"","ios-videocam":"","ios-videocam-outline":"","ios-volume-high":"","ios-volume-low":"","ios-wineglass":"","ios-wineglass-outline":"","ios-world":"","ios-world-outline":"",ipad:"",iphone:"",ipod:"",jet:"",key:"",knife:"",laptop:"",leaf:"",levels:"",lightbulb:"",link:"","load-a":"","load-b":"","load-c":"","load-d":"",location:"","lock-combination":"",locked:"","log-in":"","log-out":"",loop:"",magnet:"",male:"",man:"",map:"",medkit:"",merge:"","mic-a":"","mic-b":"","mic-c":"",minus:"","minus-circled":"","minus-round":"","model-s":"",monitor:"",more:"",mouse:"","music-note":"",navicon:"","navicon-round":"",navigate:"",network:"","no-smoking":"",nuclear:"",outlet:"",paintbrush:"",paintbucket:"","paper-airplane":"",paperclip:"",pause:"",person:"","person-add":"","person-stalker":"","pie-graph":"",pin:"",pinpoint:"",pizza:"",plane:"",planet:"",play:"",playstation:"",plus:"","plus-circled":"","plus-round":"",podium:"",pound:"",power:"",pricetag:"",pricetags:"",printer:"","pull-request":"","qr-scanner":"",quote:"","radio-waves":"",record:"",refresh:"",reply:"","reply-all":"","ribbon-a":"","ribbon-b":"",sad:"","sad-outline":"",scissors:"",search:"",settings:"",share:"",shuffle:"","skip-backward":"","skip-forward":"","social-android":"","social-android-outline":"","social-angular":"","social-angular-outline":"","social-apple":"","social-apple-outline":"","social-bitcoin":"","social-bitcoin-outline":"","social-buffer":"","social-buffer-outline":"","social-chrome":"","social-chrome-outline":"","social-codepen":"","social-codepen-outline":"","social-css3":"","social-css3-outline":"","social-designernews":"","social-designernews-outline":"","social-dribbble":"","social-dribbble-outline":"","social-dropbox":"","social-dropbox-outline":"","social-euro":"","social-euro-outline":"","social-facebook":"","social-facebook-outline":"","social-foursquare":"","social-foursquare-outline":"","social-freebsd-devil":"","social-github":"","social-github-outline":"","social-google":"","social-google-outline":"","social-googleplus":"","social-googleplus-outline":"","social-hackernews":"","social-hackernews-outline":"","social-html5":"","social-html5-outline":"","social-instagram":"","social-instagram-outline":"","social-javascript":"","social-javascript-outline":"","social-linkedin":"","social-linkedin-outline":"","social-markdown":"","social-nodejs":"","social-octocat":"","social-pinterest":"","social-pinterest-outline":"","social-python":"","social-reddit":"","social-reddit-outline":"","social-rss":"","social-rss-outline":"","social-sass":"","social-skype":"","social-skype-outline":"","social-snapchat":"","social-snapchat-outline":"","social-tumblr":"","social-tumblr-outline":"","social-tux":"","social-twitch":"","social-twitch-outline":"","social-twitter":"","social-twitter-outline":"","social-usd":"","social-usd-outline":"","social-vimeo":"","social-vimeo-outline":"","social-whatsapp":"","social-whatsapp-outline":"","social-windows":"","social-windows-outline":"","social-wordpress":"","social-wordpress-outline":"","social-yahoo":"","social-yahoo-outline":"","social-yen":"","social-yen-outline":"","social-youtube":"","social-youtube-outline":"","soup-can":"","soup-can-outline":"",speakerphone:"",speedometer:"",spoon:"",star:"","stats-bars":"",steam:"",stop:"",thermometer:"",thumbsdown:"",thumbsup:"",toggle:"","toggle-filled":"",transgender:"","trash-a":"","trash-b":"",trophy:"",tshirt:"","tshirt-outline":"",umbrella:"",university:"",unlocked:"",upload:"",usb:"",videocamera:"","volume-high":"","volume-low":"","volume-medium":"","volume-mute":"",wand:"",waterdrop:"",wifi:"",wineglass:"",woman:"",wrench:"",xbox:""},window.getUniqueId=function(t){return t+"_"+(new Date).getTime().toString()+Math.random().toString().replace(".","")},window.getTextWidth=function(t,e){var i=getTextWidth.canvas||(getTextWidth.canvas=document.createElement("canvas")),o=i.getContext("2d");return o.font=e,o.measureText(t).width},window.drawText=function(t,e,i,o,r,a){var n=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"center",s=arguments.length>8&&void 0!==arguments[8]?arguments[8]:"middle",u=arguments.length>9&&void 0!==arguments[9]?arguments[9]:"normal";t.font=u+" "+o+" "+r,t.fillStyle=a,t.textAlign=l,t.textBaseline=s,t.scale(n,n),t.clearRect(0,0,e.width,e.height);var d=i+"";if(d.match("char#")){var c=d.substring(d.indexOf("#")+1);"left"==l?t.fillText(String.fromCharCode(c),e.height/8,e.height/2):t.fillText(String.fromCharCode(c),e.width/2,e.height/2)}else"left"==l?t.fillText(d,e.height/8,e.height/2):t.fillText(d,e.width/2,e.height/2)},window.drawIcon=function(t,e,i,o,r){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;t.font=i+" Ionicons",t.fillStyle=r,t.textAlign="center",t.textBaseline="middle",t.clearRect(0,0,e.width,e.height),t.scale(a,a),icon_font[o]?t.fillText(icon_font[o],e.width/2,e.height/2):t.fillText("?",e.width/2,e.height/2)}},function(t,e,i){"use strict";AFRAME.registerComponent("gui-button",{schema:{on:{default:"click"},toggle:{type:"boolean",default:!1},toggleState:{type:"boolean",default:!1},text:{type:"string",default:"text"},fontSize:{type:"string",default:"150px"},fontFamily:{type:"string",default:"Arial"},fontWeight:{type:"string",default:"normal"},fontColor:{type:"string",default:key_offwhite},borderColor:{type:"string",default:key_offwhite},backgroundColor:{type:"string",default:key_grey},hoverColor:{type:"string",default:key_grey_dark},activeColor:{type:"string",default:key_orange}},init:function(){var t=this.data,e=this.el,i=e.getAttribute("gui-item");this.guiItem=i;var o=e.getAttribute("gui-interactable");this.guiInteractable=o;var r=512,a=i.width*r,n=i.height*r,l=document.createElement("div");l.setAttribute("class","visuallyhidden"),document.body.appendChild(l),console.log("in gui-button init, data: "+JSON.stringify(t));var s=document.createElement("canvas");this.canvas=s,s.setAttribute("width",a),s.setAttribute("height",n),s.id=getUniqueId("canvas"),l.appendChild(s);this.ctx=s.getContext("2d");e.setAttribute("geometry","primitive: plane; height: "+i.height+"; width: "+i.width+";"),e.setAttribute("material","shader: flat; transparent: true; opacity: 0.5; side:double; color:"+t.backgroundColor+";");var u=document.createElement("a-entity");u.setAttribute("geometry","primitive: box; width: "+i.width+"; height: "+i.height+"; depth: 0.02;"),u.setAttribute("material","shader: flat; opacity: 1; side:double; color: "+t.borderColor),u.setAttribute("rotation","0 0 0"),u.setAttribute("position","0 0 0.01"),e.appendChild(u);var d=document.createElement("a-entity");d.setAttribute("geometry","primitive: box; width: "+(i.width-.025)+"; height: "+(i.height-.025)+"; depth: 0.04;"),d.setAttribute("material","shader: flat; opacity: 1; side:double; color: "+(t.toggleState?t.activeColor:t.backgroundColor)),d.setAttribute("rotation","0 0 0"),d.setAttribute("position","0 0 0.02"),e.appendChild(d),this.buttonEntity=d,this.setText(t.text),e.addEventListener("mouseenter",function(e){d.removeAttribute("animation__leave"),t.toggle||d.setAttribute("animation__enter","property: material.color; from: "+t.backgroundColor+"; to:"+t.hoverColor+"; dur:200;")}),e.addEventListener("mouseleave",function(e){t.toggle||(d.removeAttribute("animation__click"),d.setAttribute("animation__leave","property: material.color; from: "+t.hoverColor+"; to:"+t.backgroundColor+"; dur:200; easing: easeOutQuad;")),d.removeAttribute("animation__enter")}),e.addEventListener(t.on,function(i){if(t.toggle){var r=e.components["gui-button"];r.setActiveState(!r.data.toggleState)}else d.setAttribute("animation__click","property: material.color; from: "+t.activeColor+"; to:"+t.backgroundColor+"; dur:400; easing: easeOutQuad;");var a=o.clickAction,n=window[a];"function"==typeof n&&n(i)}),e.setAttribute("role","button")},play:function(){},update:function(t){},setActiveState:function(t){this.data.toggleState=t,t?(console.log("active, about to set active color"),this.buttonEntity.setAttribute("material","color",this.data.activeColor)):(console.log("not active, about to set background color"),this.buttonEntity.setAttribute("material","color",this.data.backgroundColor))},setText:function(t){drawText(this.ctx,this.canvas,t,this.data.fontSize,this.data.fontFamily,this.data.fontColor,1,"center","middle",this.data.fontWeight),this.textEntity&&this.el.removeChild(this.textEntity);var e=document.createElement("a-entity");this.textEntity=e,e.setAttribute("geometry","primitive: plane; width: "+this.guiItem.width/1.05+"; height: "+this.guiItem.height/1.05+";"),e.setAttribute("material","shader: flat; src: #"+this.canvas.id+"; transparent: true; opacity: 1; side:front;"),e.setAttribute("position","0 0 0.041"),this.el.appendChild(e)}}),AFRAME.registerPrimitive("a-gui-button",{defaultComponents:{"gui-interactable":{},"gui-item":{type:"button"},"gui-button":{}},mappings:{onclick:"gui-interactable.clickAction",onhover:"gui-interactable.hoverAction","key-code":"gui-interactable.keyCode",width:"gui-item.width",height:"gui-item.height",margin:"gui-item.margin",on:"gui-button.on",value:"gui-button.text","font-color":"gui-button.fontColor","font-size":"gui-button.fontSize","font-weight":"gui-button.fontWeight","font-family":"gui-button.fontFamily","border-color":"gui-button.borderColor","background-color":"gui-button.backgroundColor","hover-color":"gui-button.hoverColor","active-color":"gui-button.activeColor",toggle:"gui-button.toggle","toggle-state":"gui-button.toggleState"}})},function(t,e,i){"use strict";AFRAME.registerComponent("gui-circle-loader",{schema:{count:{type:"number",default:"100"},fontFamily:{type:"string",default:"Arial"},fontSize:{type:"string",default:"150px"},fontColor:{type:"string",default:key_grey},backgroundColor:{type:"string",default:key_offwhite},activeColor:{type:"string",default:key_orange}},init:function(){var t=this.data,e=this.el,i=e.getAttribute("gui-item"),o=512,r=i.height*o,a=i.height*o,n=document.createElement("div");n.setAttribute("class","visuallyhidden"),document.body.appendChild(n);var l=document.createElement("canvas");this.canvas=l,l.className="visuallyhidden",l.setAttribute("width",r),l.setAttribute("height",a),l.className="visuallyhidden",l.id=getUniqueId("canvas"),n.appendChild(l);var s=this.ctx=l.getContext("2d");e.setAttribute("geometry","primitive: plane; height: "+i.height+"; width: "+i.height+";"),e.setAttribute("material","shader: flat; transparent: true; opacity: 1; side:back; color:"+t.backgroundColor+";"),drawText(s,l,t.count+"%",t.fontSize,t.fontFamily,t.fontColor,1,"center","middle");var u=document.createElement("a-entity");u.setAttribute("geometry","primitive: cylinder; radius: "+i.height/2+"; height: 0.02;"),u.setAttribute("material","shader: flat; opacity: 1; side:double; color: "+t.backgroundColor),u.setAttribute("rotation","90 0 0"),u.setAttribute("position","0 0 0.01"),e.appendChild(u);var d=document.createElement("a-entity");d.setAttribute("geometry","primitive: plane; width: "+i.height/1.5+"; height: "+i.height/1.5+";"),d.setAttribute("material","shader: flat; src: #"+l.id+"; transparent: true; opacity: 1; side:front;"),d.setAttribute("position","0 0 0.022"),d.id="loader_ring_count",e.appendChild(d);var c=document.createElement("a-ring");c.setAttribute("material","shader: flat; opacity: 1; side:double; color: "+t.activeColor),c.setAttribute("radius-inner",""+i.height/3),c.setAttribute("radius-outer",""+i.height/2),c.setAttribute("theta-start","90"),c.setAttribute("theta-length","10"),c.setAttribute("rotation","0 0 0"),c.setAttribute("position","0 0 0.04"),c.id="loader_ring",e.appendChild(c)},play:function(){},update:function(t){}}),AFRAME.registerPrimitive("a-gui-circle-loader",{defaultComponents:{"gui-item":{type:"circle-loader"},"gui-circle-loader":{}},mappings:{width:"gui-item.width",height:"gui-item.height",margin:"gui-item.margin",count:"gui-circle-loader.count","font-size":"gui-circle-loader.fontSize","font-family":"gui-circle-loader.fontFamily","font-color":"gui-circle-loader.fontColor","background-color":"gui-circle-loader.backgroundColor","active-color":"gui-circle-loader.activeColor"}})},function(t,e,i){"use strict";AFRAME.registerComponent("gui-circle-timer",{schema:{countDown:{type:"number",default:"10"},fontFamily:{type:"string",default:"Arial"},fontSize:{type:"string",default:"150px"},fontColor:{type:"string",default:key_grey},borderColor:{type:"string",default:key_grey},backgroundColor:{type:"string",default:key_offwhite},activeColor:{type:"string",default:key_orange}},init:function(){var t=this.data,e=this.el,i=e.getAttribute("gui-item"),o=e.getAttribute("gui-interactable");console.log("in timer callback, guiInteractable: "+JSON.stringify(o));var r=512,a=i.height*r,n=i.height*r,l=(this.initCount=t.countDown,document.createElement("div"));l.setAttribute("class","visuallyhidden"),document.body.appendChild(l);var s=document.createElement("canvas");this.canvas=s,s.className="visuallyhidden",s.setAttribute("width",a),s.setAttribute("height",n),s.className="visuallyhidden",s.id=getUniqueId("canvas"),l.appendChild(s);var u=this.ctx=s.getContext("2d");e.setAttribute("geometry","primitive: plane; height: "+i.height+"; width: "+i.height+";"),e.setAttribute("material","shader: flat; transparent: true; opacity: 1; side:back; color:"+t.backgroundColor+";"),drawText(u,s,t.countDown,t.fontSize,t.fontFamily,t.fontColor,1,"center","middle");var d=document.createElement("a-entity");d.setAttribute("geometry","primitive: cylinder; radius: "+i.height/2+"; height: 0.02;"),d.setAttribute("material","shader: flat; opacity: 1; side:double; color: "+t.backgroundColor),d.setAttribute("rotation","90 0 0"),d.setAttribute("position","0 0 0.01"),e.appendChild(d);var c=document.createElement("a-entity");c.setAttribute("geometry","primitive: plane; width: "+i.height/1.5+"; height: "+i.height/1.5+";"),c.setAttribute("material","shader: flat; src: #"+s.id+"; transparent: true; opacity: 1; side:front;"),c.setAttribute("position","0 0 0.022"),e.appendChild(c),this.countDownLabel=c;var h=document.createElement("a-ring");h.setAttribute("material","shader: flat; opacity: 1; side:double; color: "+t.borderColor),h.setAttribute("radius-inner",""+i.height/3),h.setAttribute("radius-outer",""+i.height/2),h.setAttribute("theta-start","-1"),h.setAttribute("theta-length","3"),h.setAttribute("position","0 0 0.04"),e.appendChild(h);var g=document.createElement("a-ring");g.setAttribute("material","shader: flat; opacity: 1; side:double; color: "+t.borderColor),g.setAttribute("radius-inner",""+i.height/3),g.setAttribute("radius-outer",""+i.height/2),g.setAttribute("theta-start","89"),g.setAttribute("theta-length","3"),g.setAttribute("position","0 0 0.04"),e.appendChild(g);var p=document.createElement("a-ring");p.setAttribute("material","shader: flat; opacity: 1; side:double; color: "+t.borderColor),p.setAttribute("radius-inner",""+i.height/3),p.setAttribute("radius-outer",""+i.height/2),p.setAttribute("theta-start","179"),p.setAttribute("theta-length","3"),p.setAttribute("position","0 0 0.04"),e.appendChild(p);var m=document.createElement("a-ring");m.setAttribute("material","shader: flat; opacity: 1; side:double; color: "+t.borderColor),m.setAttribute("radius-inner",""+i.height/3),m.setAttribute("radius-outer",""+i.height/2),m.setAttribute("theta-start","269"),m.setAttribute("theta-length","3"),m.setAttribute("position","0 0 0.04"),e.appendChild(m);var b=document.createElement("a-ring");b.setAttribute("material","shader: flat; opacity: 1; side:double; color: "+t.activeColor),b.setAttribute("radius-inner",""+i.height/3),b.setAttribute("radius-outer",""+i.height/2),b.setAttribute("theta-start","0"),b.setAttribute("theta-length","0"),b.setAttribute("rotation","0 180 90"),b.setAttribute("position","0 0 0.03"),e.appendChild(b),this.timerRing=b},update:function(t){var e=this.data,i=this.el;if(0!==Object.keys(t).length&&e.countDown!==t.countDown){i.getObject3D("mesh").material.color=e.color;var o=e.countDown,r=this.initCount,a=Math.round(100*(r-o)/r)/100*360;this.timerRing.setAttribute("theta-length",a),drawText(this.ctx,this.canvas,o,e.fontSize,e.fontFamily,e.fontColor,1,"center","middle"),this.countDownLabel&&i.removeChild(this.countDownLabel);var n=i.getAttribute("gui-item"),l=this.canvas,s=document.createElement("a-entity");s.setAttribute("geometry","primitive: plane; width: "+n.height/1.5+"; height: "+n.height/1.5+";"),s.setAttribute("material","shader: flat; src: #"+l.id+"; transparent: true; opacity: 1; side:front;"),s.setAttribute("position","0 0 0.022"),i.appendChild(s),this.countDownLabel=s,1==o&&console.log("fire callback on the last second")}},callback:function(){var t=this.el.getAttribute("gui-interactable"),e=t.clickAction;console.log("in timer callback, guiInteractable: "+JSON.stringify(t)),console.log("in button, clickActionFunctionName: "+e);var i=window[e];"function"==typeof i&&i()}}),AFRAME.registerPrimitive("a-gui-circle-timer",{defaultComponents:{"gui-item":{type:"circle-timer"},"gui-circle-timer":{}},mappings:{width:"gui-item.width",height:"gui-item.height",margin:"gui-item.margin","count-down":"gui-circle-timer.countDown","font-size":"gui-circle-timer.fontSize","font-family":"gui-circle-timer.fontFamily","font-color":"gui-circle-timer.fontColor","border-color":"gui-circle-timer.borderColor","background-color":"gui-circle-timer.backgroundColor","active-color":"gui-circle-timer.activeColor",callback:"gui-interactable.clickAction"}})},function(t,e,i){"use strict";AFRAME.registerComponent("gui-cursor",{schema:{color:{type:"string",default:key_white},hoverColor:{type:"string",default:key_white},activeColor:{type:"string",default:key_orange},distance:{type:"number",default:-1},design:{type:"string",default:"dot"}},init:function(){var t=this.cursor=this.el.getAttribute("cursor"),e=this.fuse=t.fuse,i=t.fuseTimeout,o=this.el,r=this.data,a=200,n=i-a;if(AFRAME.utils.entity.setComponentProperty(o,"raycaster.interval","500"),console.log("fuse: "+e+", fuseTimeout: "+i),"dot"==r.design){o.setAttribute("geometry","primitive: ring; radiusInner:0.000001; radiusOuter:0.025"),o.setAttribute("material","color: "+r.color+"; shader: flat; opacity:1;"),o.setAttribute("position","0 0 "+r.distance),o.setAttribute("animation__radiusInnerIn","property: geometry.radiusInner; from: 0.000001; to:0.0225; dur:"+a+"; easing:linear; startEvents: hovergui"),o.setAttribute("animation__radiusOuterIn","property: geometry.radiusOuter; from: 0.025; to:0.0275; dur:"+a+"; easing:linear; startEvents: hovergui"),o.setAttribute("animation__colorIn","property: material.color; from: "+r.color+"; to:"+r.hoverColor+"; dur:"+a+"; easing:linear; startEvents: hovergui"),o.setAttribute("animation__radiusInnerOut","property: geometry.radiusInner; from: 0.0225; to:0.000001; dur:"+a+"; easing:linear; startEvents: leavegui"),o.setAttribute("animation__radiusOuterOut","property: geometry.radiusOuter; from: 0.0275; to:0.025; dur:"+a+"; easing:linear; startEvents: leavegui"),o.setAttribute("animation__colorOut","property: material.color; from: "+r.hoverColor+"; to:"+r.color+"; dur:"+a+"; easing:linear; startEvents: leavegui"),o.setAttribute("animation__scale","property: scale; from: 1 1 1; to:1.25 1.25 1.25; dur:200; easing:easeInQuad; startEvents: click");var l=document.createElement("a-entity");if(l.setAttribute("geometry","primitive: ring; radiusInner:0.0275; radiusOuter:0.03; thetaLength:360"),l.setAttribute("material","color: #000000; shader: flat; opacity:0.25;"),l.setAttribute("position","0 0 0"),l.setAttribute("animation__radiusInnerIn","property: geometry.radiusInner; from: 0.0275; to:0.03; dur:"+a+"; easing:linear; startEvents: hovergui"),l.setAttribute("animation__radiusOuterIn","property: geometry.radiusOuter; from: 0.03; to:0.0325; dur:"+a+"; easing:linear; startEvents: hovergui"),l.setAttribute("animation__radiusInnerOut","property: geometry.radiusInner; from: 0.03; to:0.0275; dur:"+a+"; easing:linear; startEvents: leavegui"),l.setAttribute("animation__radiusOuterOut","property: geometry.radiusOuter; from: 0.0325; to:0.03; dur:"+a+"; easing:linear; startEvents: leavegui"),o.appendChild(l),this.cursorShadow=l,e){var s=document.createElement("a-entity");s.setAttribute("geometry","primitive: ring; radiusInner:0.03; radiusOuter:0.0375; thetaLength:0"),s.setAttribute("material","color: "+r.activeColor+"; shader: flat; opacity:1;"),s.setAttribute("position","0 0 0"),s.setAttribute("animation","property: geometry.thetaLength; from: 0; to:360; dur:"+n+"; delay: "+a+"; easing:linear; autoplay:false;"),o.appendChild(s),this.fuseLoader=s}}else if("ring"==r.design){o.setAttribute("geometry","primitive: ring; radiusInner:0.0225; radiusOuter:0.0275"),o.setAttribute("material","color: "+r.color+"; shader: flat; opacity:1;"),o.setAttribute("position","0 0 "+r.distance),o.setAttribute("animation__radiusInnerIn","property: geometry.radiusInner; from: 0.0225; to:0.025; dur:"+a+"; easing:linear; startEvents: hovergui"),o.setAttribute("animation__radiusOuterIn","property: geometry.radiusOuter; from: 0.0275; to:0.0325; dur:"+a+"; easing:linear; startEvents: hovergui"),o.setAttribute("animation__colorIn","property: material.color; from: "+r.color+"; to:"+r.hoverColor+"; dur:"+a+"; easing:linear; startEvents: hovergui"),o.setAttribute("animation__radiusInnerOut","property: geometry.radiusInner; from: 0.025; to:0.0225; dur:"+a+"; easing:linear; startEvents: leavegui"),o.setAttribute("animation__radiusOuterOut","property: geometry.radiusOuter; from: 0.0325; to:0.0275; dur:"+a+"; easing:linear; startEvents: leavegui"),o.setAttribute("animation__colorOut","property: material.color; from: "+r.hoverColor+"; to:"+r.color+"; dur:"+a+"; easing:linear; startEvents: leavegui"),o.setAttribute("animation__scale","property: scale; from: 1 1 1; to:1.25 1.25 1.25; dur:200; easing:easeInQuad; startEvents: click");var l=document.createElement("a-entity");if(l.setAttribute("geometry","primitive: ring; radiusInner:0.03; radiusOuter:0.0325; thetaLength:360"),l.setAttribute("material","color: #000000; shader: flat; opacity:0.25;"),l.setAttribute("position","0 0 0"),l.setAttribute("animation__radiusInnerIn","property: geometry.radiusInner; from: 0.03; to:0.0325; dur:"+a+"; easing:linear; startEvents: hovergui"),l.setAttribute("animation__radiusOuterIn","property: geometry.radiusOuter; from: 0.0325; to:0.0375; dur:"+a+"; easing:linear; startEvents: hovergui"),l.setAttribute("animation__radiusInnerOut","property: geometry.radiusInner; from: 0.0325; to:0.03; dur:"+a+"; easing:linear; startEvents: leavegui"),l.setAttribute("animation__radiusOuterOut","property: geometry.radiusOuter; from: 0.0375; to:0.0325; dur:"+a+"; easing:linear; startEvents: leavegui"),o.appendChild(l),this.cursorShadow=l,e){var s=document.createElement("a-entity");s.setAttribute("geometry","primitive: ring; radiusInner:0.035; radiusOuter:0.0425; thetaLength:0"),s.setAttribute("material","color: "+r.activeColor+"; shader: flat; opacity:1;"),s.setAttribute("position","0 0 0"),s.setAttribute("animation","property: geometry.thetaLength; from: 0; to:360; dur:"+n+"; delay: "+a+"; easing:linear; autoplay:false;"),o.appendChild(s),this.fuseLoader=s}}else if("reticle"==r.design){o.setAttribute("geometry","primitive: ring; radiusInner:0.000001; radiusOuter:0.0125; thetaLength:180;"),o.setAttribute("material","color: "+r.color+"; shader: flat; opacity:1;"),o.setAttribute("position","0 0 "+r.distance),o.setAttribute("animation__opacityIn","property: material.opacity; from: 1; to: 0; dur:"+a+"; easing:linear; startEvents: hovergui"),o.setAttribute("animation__opacityOut","property: material.opacity; from: 0; to: 1; dur:"+a+"; easing:linear; startEvents: leavegui");var u=document.createElement("a-entity");u.setAttribute("geometry","primitive: ring; radiusInner:0.000001; radiusOuter:0.0125; thetaLength:180; thetaStart:180;"),u.setAttribute("material","color: #000000; shader: flat; opacity:0.25;"),u.setAttribute("position","0 0 0"),u.setAttribute("animation__opacityIn","property: material.opacity; from: 0.25; to: 0; dur:"+a+"; easing:linear; startEvents: hovergui"),u.setAttribute("animation__opacityOut","property: material.opacity; from: 0; to: 0.25; dur:"+a+"; easing:linear; startEvents: leavegui"),o.appendChild(u),this.cursorCenter=u;var l=document.createElement("a-entity");l.setAttribute("geometry","primitive: ring; radiusInner:0.0125; radiusOuter:0.0145"),l.setAttribute("material","color: #000000; shader: flat; opacity:0.25;"),l.setAttribute("position","0 0 0"),l.setAttribute("animation__colorIn","property: material.color; from: #000000; to: "+r.color+"; dur:"+a+"; easing:linear; startEvents: hovergui"),l.setAttribute("animation__opacityIn","property: material.opacity; from: 0.25; to: 1; dur:"+a+"; easing:linear; startEvents: hovergui"),l.setAttribute("animation__colorOut","property: material.color; from: "+r.color+"; to: #000000; dur:"+a+"; easing:linear; startEvents: leavegui"),l.setAttribute("animation__opacityOut","property: material.opacity; from: 1; to: 0.25; dur:"+a+"; easing:linear; startEvents: leavegui"),o.appendChild(l),this.cursorShadow=l;var d=document.createElement("a-entity");d.setAttribute("geometry","primitive: plane; width:0.005; height:0.005;"),d.setAttribute("material","color: #000000; shader: flat; opacity:0.25;"),d.setAttribute("position","-0.0325 0.0325 0"),o.appendChild(d),this.cursorShadowTL=d;var c=document.createElement("a-entity");c.setAttribute("geometry","primitive: plane; width:0.005; height:0.005;"),c.setAttribute("material","color: #000000; shader: flat; opacity:0.25;"),c.setAttribute("position","-0.0325 -0.0325 0"),o.appendChild(c),this.cursorShadowBL=c;var h=document.createElement("a-entity");h.setAttribute("geometry","primitive: plane; width:0.005; height:0.005;"),h.setAttribute("material","color: #000000; shader: flat; opacity:0.25;"),h.setAttribute("position","0.0325 0.0325 0"),o.appendChild(h),this.cursorShadowTR=h;var g=document.createElement("a-entity");g.setAttribute("geometry","primitive: plane; width:0.005; height:0.005;"),g.setAttribute("material","color: #000000; shader: flat; opacity:0.25;"),g.setAttribute("position","0.0325 -0.0325 0"),o.appendChild(g),this.cursorShadowBR=g;var p=document.createElement("a-entity");p.setAttribute("geometry","primitive: plane; width:0.015; height:0.0035;"),p.setAttribute("material","color: "+r.color+"; shader: flat; opacity:1;"),p.setAttribute("position","-0.03 0.0375 0"),o.appendChild(p),this.cursorBoundTL=p;var m=document.createElement("a-entity");m.setAttribute("geometry","primitive: plane; width:0.0035; height:0.015;"),m.setAttribute("material","color: "+r.color+"; shader: flat; opacity:1;"),m.setAttribute("position","-0.0375 0.03 0"),o.appendChild(m),this.cursorBoundTL2=m;var b=document.createElement("a-entity");b.setAttribute("geometry","primitive: plane; width:0.015; height:0.0035;"),b.setAttribute("material","color: "+r.color+"; shader: flat; opacity:1;"),b.setAttribute("position","0.03 0.0375 0"),o.appendChild(b),this.cursorBoundTR=b;var f=document.createElement("a-entity");f.setAttribute("geometry","primitive: plane; width:0.0035; height:0.015;"),f.setAttribute("material","color: "+r.color+"; shader: flat; opacity:1;"),f.setAttribute("position","0.0375 0.03 0"),o.appendChild(f),this.cursorBoundTR2=f;var y=document.createElement("a-entity");y.setAttribute("geometry","primitive: plane; width:0.015; height:0.0035;"),y.setAttribute("material","color: "+r.color+"; shader: flat; opacity:1;"),y.setAttribute("position","-0.03 -0.0375 0"),o.appendChild(y),this.cursorBoundBL=y;var v=document.createElement("a-entity");v.setAttribute("geometry","primitive: plane; width:0.0035; height:0.015;"),v.setAttribute("material","color: "+r.color+"; shader: flat; opacity:1;"),v.setAttribute("position","-0.0375 -0.03 0"),o.appendChild(v),this.cursorBoundBL2=v;var A=document.createElement("a-entity");A.setAttribute("geometry","primitive: plane; width:0.015; height:0.0035;"),A.setAttribute("material","color: "+r.color+"; shader: flat; opacity:1;"),A.setAttribute("position","0.03 -0.0375 0"),o.appendChild(A),this.cursorBoundBR=A;var w=document.createElement("a-entity");if(w.setAttribute("geometry","primitive: plane; width:0.0035; height:0.015;"),w.setAttribute("material","color: "+r.color+"; shader: flat; opacity:1;"),w.setAttribute("position","0.0375 -0.03 0"),o.appendChild(w),this.cursorBoundBR2=w,e){var s=document.createElement("a-entity");s.setAttribute("geometry","primitive: plane; width:0.000001; height:0.01;"),s.setAttribute("material","color: "+r.activeColor+"; shader: flat; opacity:1;"),s.setAttribute("position","0 -0.05 0"),s.setAttribute("animation","property: geometry.width; from: 0; to: 0.075; dur:"+n+"; delay:"+a+"; easing:linear; autoplay:false;"),o.appendChild(s),this.fuseLoader=s}}else if("cross"==r.design){o.setAttribute("geometry","primitive: ring; radiusInner:0.035; radiusOuter:0.0375"),o.setAttribute("material","color: "+r.color+"; shader: flat; opacity:1;"),o.setAttribute("position","0 0 "+r.distance),o.setAttribute("animation__radiusInnerIn","property: geometry.radiusInner; from: 0.035; to: 0.0315; dur:"+a+"; easing:linear; startEvents: hovergui"),o.setAttribute("animation__radiusInnerOut","property: geometry.radiusInner; from: 0.0315; to: 0.035; dur:"+a+"; easing:linear; startEvents: leavegui");var l=document.createElement("a-entity");l.setAttribute("geometry","primitive: ring; radiusInner:0.0375; radiusOuter:0.04; thetaLength:360"),l.setAttribute("material","color: #000000; shader: flat; opacity:0.25;"),l.setAttribute("position","0 0 0"),o.appendChild(l),this.cursorShadow=l;var C=document.createElement("a-entity");C.setAttribute("geometry","primitive: plane; width:0.0035; height:0.01875"),C.setAttribute("material","color: "+r.color+"; shader: flat; opacity:1;"),C.setAttribute("position","0 0.028125 0"),C.setAttribute("animation__widthIn","property: geometry.width; from: 0.0035; to: 0.007; dur:"+n+"; easing:linear; startEvents: hovergui"),C.setAttribute("animation__widthOut","property: geometry.width; from: 0.007; to: 0.0035; dur:"+n+"; easing:linear; startEvents: leavegui"),o.appendChild(C),this.cursorVerticalTop=C;var k=document.createElement("a-entity");k.setAttribute("geometry","primitive: plane; width:0.0035; height:0.01875"),k.setAttribute("material","color: "+r.color+"; shader: flat; opacity:1;"),k.setAttribute("position","0 -0.028125 0"),k.setAttribute("animation__widthIn","property: geometry.width; from: 0.0035; to: 0.007; dur:"+n+"; easing:linear; startEvents: hovergui"),k.setAttribute("animation__widthOut","property: geometry.width; from: 0.007; to: 0.0035; dur:"+n+"; easing:linear; startEvents: leavegui"),o.appendChild(k),this.cursorVerticalBottom=k;var _=document.createElement("a-entity");_.setAttribute("geometry","primitive: plane; width:0.01875; height:0.0035"),_.setAttribute("material","color: "+r.color+"; shader: flat; opacity:1;"),_.setAttribute("position","-0.028125 0 0"),_.setAttribute("animation__heightIn","property: geometry.height; from: 0.0035; to: 0.007; dur:"+n+"; easing:linear; startEvents: hovergui"),_.setAttribute("animation__heightOut","property: geometry.height; from: 0.007; to: 0.0035; dur:"+n+"; easing:linear; startEvents: leavegui"),o.appendChild(_),this.cursorHorizontalLeft=_;var E=document.createElement("a-entity");if(E.setAttribute("geometry","primitive: plane; width:0.01875; height:0.0035"),E.setAttribute("material","color: "+r.color+"; shader: flat; opacity:1;"),E.setAttribute("position","0.028125 0 0"),E.setAttribute("animation__heightIn","property: geometry.height; from: 0.0035; to: 0.007; dur:"+n+"; easing:linear; startEvents: hovergui"),E.setAttribute("animation__heightOut","property: geometry.height; from: 0.007; to: 0.0035; dur:"+n+"; easing:linear; startEvents: leavegui"),o.appendChild(E),this.cursorHorizontalRight=E,e){var s=document.createElement("a-entity");s.setAttribute("geometry","primitive: ring; radiusInner:0.0415; radiusOuter:0.0485; thetaLength:0"),s.setAttribute("material","color: "+r.activeColor+"; shader: flat; opacity:1;"),s.setAttribute("position","0 0 0"),s.setAttribute("animation","property: geometry.thetaLength; from: 0; to: 360; dur:"+n+"; delay:"+a+"; easing:linear; autoplay:false;"),o.appendChild(s),this.fuseLoader=s}}o.addEventListener("mouseenter",function(){console.log("in gui-cursor mousenter, el: "+o),o.emit("hovergui"),"dot"==r.design||"ring"==r.design?l.emit("hovergui"):"cross"==r.design?(l.emit("hovergui"),C.emit("hovergui"),k.emit("hovergui"),_.emit("hovergui"),E.emit("hovergui")):"reticle"==r.design&&(centerHoverAniOpacity.emit("hovergui"),cursorHoverAniColor.emit("hovergui"),cursorHoverAniOpacity.emit("hovergui"))}),o.addEventListener("mouseleave",function(){console.log("in gui-cursor mouseleave, el: "+o),o.emit("leavegui"),"dot"==r.design||"ring"==r.design?l.emit("leavegui"):"cross"==r.design?(C.emit("leavegui"),k.emit("leavegui"),_.emit("leavegui"),E.emit("leavegui")):"reticle"==r.design&&(centerHoverAniOpacity.emit("leavegui"),cursorHoverAniColor.emit("leavegui"),cursorHoverAniOpacity.emit("leavegui")),e&&(s.object3D.el.components.animation.animation.pause(),s.object3D.el.components.animation.animation.seek(0)),o.setAttribute("scale","1 1 1")}),e&&o.addEventListener("fusing",function(){s.object3D.el.components.animation.animation.play()}),o.addEventListener("stateremoved",function(t){console.log("evt.detail "+t.detail),"cursor-fusing"===t.detail?"dot"==r.design||"ring"==r.design||"cross"==r.design?e&&(s.object3D.el.components.animation.animation.pause(),s.object3D.el.components.animation.animation.seek(0),AFRAME.utils.entity.setComponentProperty(s,"geometry.thetaLength","0")):"reticle"==r.design&&e&&(s.object3D.el.components.animation.animation.pause(),s.object3D.el.components.animation.animation.seek(0),AFRAME.utils.entity.setComponentProperty(s,"geometry.width","0.000001")):"cursor-hovering"===t.detail&&("dot"==r.design||"ring"==r.design?(AFRAME.utils.entity.setComponentProperty(this,"scale","1 1 1"),e&&AFRAME.utils.entity.setComponentProperty(s,"geometry.thetaLength","0")):"cross"==r.design?e&&AFRAME.utils.entity.setComponentProperty(s,"geometry.thetaLength","0"):"reticle"==r.design&&e&&AFRAME.utils.entity.setComponentProperty(s,"geometry.width","0.000001"))})},update:function(){},tick:function(){},remove:function(){},pause:function(){},play:function(){}}),AFRAME.registerPrimitive("a-gui-cursor",{defaultComponents:{cursor:{},"gui-cursor":{}},mappings:{fuse:"cursor.fuse","fuse-timeout":"cursor.fuseTimeout",color:"gui-cursor.color","hover-color":"gui-cursor.hoverColor","active-color":"gui-cursor.activeColor",distance:"gui-cursor.distance",design:"gui-cursor.design"}})},function(t,e,i){"use strict";i(0);var o=function(t,e){new MutationObserver(function(t,i){t.forEach(function(t){console.log(t),t.addedNodes.length&&e(t.target,t.addedNodes)})}).observe(t,{childList:!0})};AFRAME.registerComponent("gui-flex-container",{schema:{flexDirection:{type:"string",default:"row"},justifyContent:{type:"string",default:"flexStart"},alignItems:{type:"string",default:"flexStart"},itemPadding:{type:"number",default:0},opacity:{type:"number",default:0},isTopContainer:{type:"boolean",default:!1},panelColor:{type:"string",default:key_grey},styles:{fontFamily:{type:"string",default:"Helvetica"},fontColor:{type:"string",default:key_offwhite},borderColor:{type:"string",default:key_offwhite},backgroundColor:{type:"string",default:key_grey},hoverColor:{type:"string",default:key_grey_dark},activeColor:{type:"string",default:key_orange},handleColor:{type:"string",default:key_offwhite}}},init:function(){console.log("in aframe-gui-component init for: "+this.el.getAttribute("id"));var t=this.el.getAttribute("gui-item");this.data.isTopContainer&&this.setBackground(),this.el.setAttribute("geometry","primitive: plane; height: "+t.height+"; width: "+t.width+";"),this.el.setAttribute("material","shader: flat; transparent: true; opacity: "+this.data.opacity+"; alphaTest: 0.5; color: "+this.data.panelColor+"; side:front;"),this.children=this.el.getChildEntities();var e=0,i=0;if("row"==this.data.flexDirection){if("flexStart"==this.data.justifyContent)e=0;else if("center"==this.data.justifyContent||"flexEnd"==this.data.justifyContent){for(var r=0,a=0;a<this.children.length;a++){var n=this.children[a],l=n.getAttribute("gui-item");r=r+l.margin.w+l.width+l.margin.y}"center"==this.data.justifyContent?e=.5*(t.width-r):"flexEnd"==this.data.justifyContent&&(e=t.width-r)}"center"==this.data.alignItems?i=t.height:"flexStart"==this.data.alignItems?i=0:"flexEnd"==this.data.alignItems&&(i=t.height)}else if("column"==this.data.flexDirection){if("flexStart"==this.data.justifyContent)i=0;else if("center"==this.data.justifyContent||"flexEnd"==this.data.justifyContent){for(var s=0,a=0;a<this.children.length;a++){var n=this.children[a],l=n.getAttribute("gui-item");s=s+l.margin.x+l.height+l.margin.z}"center"==this.data.justifyContent?i=.5*(t.height-s):"flexEnd"==this.data.justifyContent&&(i=t.height-s)}"flexStart"==this.data.alignItems?e=0:"center"==this.data.alignItems?e=.5*t.width:"flexEnd"==this.data.alignItems&&(e=0)}for(var a=0;a<this.children.length;a++){var n=this.children[a],u=0,d=0,l=n.getAttribute("gui-item");if(l){"row"==this.data.flexDirection?("center"==this.data.alignItems?d=0:"flexStart"==this.data.alignItems?d=.5*t.height-l.margin.x-l.height:"flexEnd"==this.data.alignItems&&(d=.5*-t.height+l.margin.z+l.height),u=.5*-t.width+e+l.margin.w+.5*l.width,e=e+l.margin.w+l.width+l.margin.y):"column"==this.data.flexDirection&&("center"==this.data.alignItems?u=0:"flexStart"==this.data.alignItems?u=.5*-t.width+l.margin.w+.5*l.width:"flexEnd"==this.data.alignItems&&(u=.5*t.width-l.margin.y-.5*l.width),d=.5*t.height-i- -l.margin.x-.5*l.height,i=i+l.margin.x+l.height+l.margin.z),n.setAttribute("position",u+" "+d+" "+.01),n.setAttribute("geometry","primitive: plane; height: "+l.height+"; width: "+l.width+";");var c=n.components["gui-flex-container"];c&&c.setBackground()}}o(this.el,function(t,e){e[0];e[0].addEventListener("loaded",function(e){t.components["gui-flex-container"].init()})})},update:function(){},tick:function(){},remove:function(){},pause:function(){},play:function(){},getElementSize:function(){},setBackground:function(){if(this.data.opacity>0){console.log("panel position: "+JSON.stringify(this.el.getAttribute("position")));var t=this.el.getAttribute("gui-item"),e=document.createElement("a-entity");e.setAttribute("geometry","primitive: box; height: "+t.height+"; width: "+t.width+"; depth:0.025;"),console.log("about to set panel background color to: : "+this.data.panelColor),e.setAttribute("material","shader: standard; depthTest: true; opacity: "+this.data.opacity+"; color: "+this.data.panelColor+";"),e.setAttribute("position",this.el.getAttribute("position").x+" "+this.el.getAttribute("position").y+" "+(this.el.getAttribute("position").z-.0125)),e.setAttribute("rotation",this.el.getAttribute("rotation").x+" "+this.el.getAttribute("rotation").y+" "+this.el.getAttribute("rotation").z),this.el.parentNode.insertBefore(e,this.el)}}}),AFRAME.registerPrimitive("a-gui-flex-container",{defaultComponents:{"gui-item":{type:"flex-container"},"gui-flex-container":{}},mappings:{width:"gui-item.width",height:"gui-item.height",margin:"gui-item.margin","flex-direction":"gui-flex-container.flexDirection","justify-content":"gui-flex-container.justifyContent","align-items":"gui-flex-container.alignItems","item-padding":"gui-flex-container.itemPadding",opacity:"gui-flex-container.opacity","is-top-container":"gui-flex-container.isTopContainer","panel-color":"gui-flex-container.panelColor","font-family":"gui-flex-container.styles.fontFamily","font-color":"gui-flex-container.styles.fontColor","border-color":"gui-flex-container.styles.borderColor","background-color":"gui-flex-container.styles.backgroundColor","hover-color":"gui-flex-container.styles.hoverColor","active-color":"gui-flex-container.styles.activeColor","handle-color":"gui-flex-container.styles.handleColor"}})},function(t,e,i){"use strict";AFRAME.registerComponent("gui-icon-button",{schema:{on:{default:"click"},toggle:{type:"boolean",default:!1},icon:{type:"string",default:""},iconActive:{type:"string",default:""},fontFamily:{type:"string",default:"Arial"},iconFontSize:{type:"string",default:"400px"},fontSize:{type:"string",default:"150px"},fontColor:{type:"string",default:key_offwhite},borderColor:{type:"string",default:key_offwhite},backgroundColor:{type:"string",default:key_grey},hoverColor:{type:"string",default:key_grey_dark},activeColor:{type:"string",default:key_orange}},init:function(){var t=this.data,e=this.el,i=e.getAttribute("gui-item"),o=e.getAttribute("gui-interactable"),r=512,a=i.height*r,n=i.height*r,l=(this.toggleState=t.toggle,document.createElement("div"));l.setAttribute("class","visuallyhidden"),document.body.appendChild(l);var s=document.createElement("canvas");this.canvas=s,s.setAttribute("width",a),s.setAttribute("height",n),s.id=getUniqueId("canvasIcon"),l.appendChild(s);var u=this.ctx=s.getContext("2d");e.setAttribute("geometry","primitive: plane; height: "+i.height+"; width: "+i.width+";"),e.setAttribute("material","shader: flat; transparent: true; opacity: 0.0; alphaTest: 0.5; side:double; color:"+t.backgroundColor+";"),drawIcon(u,s,t.iconFontSize,t.icon,t.fontColor,1);var d=document.createElement("a-entity");d.setAttribute("geometry","primitive: cylinder; radius: "+i.height/2+"; height: 0.02;"),d.setAttribute("material","shader: flat; opacity: 1; side:double; color: "+t.borderColor),d.setAttribute("rotation","90 0 0"),d.setAttribute("position","0 0 0.01"),e.appendChild(d);var c=document.createElement("a-entity");c.setAttribute("geometry","primitive: cylinder; radius: "+i.height/2.05+"; height: 0.04;"),c.setAttribute("material","shader: flat; opacity: 1; side:double; color: "+t.backgroundColor),c.setAttribute("rotation","90 0 0"),c.setAttribute("position","0 0 0.02"),e.appendChild(c),this.buttonEntity=c;var h=document.createElement("a-entity");h.setAttribute("geometry","primitive: plane; width: "+i.height/2+"; height: "+i.height/2+";"),h.setAttribute("material","shader: flat; src: #"+s.id+"; transparent: true; opacity: 1; alphaTest: 0.5; side:front;"),h.setAttribute("position","0 0 0.041"),e.appendChild(h),e.addEventListener("mouseenter",function(e){c.removeAttribute("animation__leave"),c.setAttribute("animation__enter","property: material.color; from: "+t.backgroundColor+"; to:"+t.hoverColor+"; dur:200;")}),e.addEventListener("mouseleave",function(e){t.toggle||c.removeAttribute("animation__click"),c.removeAttribute("animation__enter"),c.setAttribute("animation__leave","property: material.color; from: "+t.hoverColor+"; to:"+t.backgroundColor+"; dur:200; easing: easeOutQuad;")}),e.addEventListener(t.on,function(e){t.toggle?c.setAttribute("material","color",t.activeColor):c.setAttribute("animation__click","property: material.color; from: "+t.activeColor+"; to:"+t.backgroundColor+"; dur:400; easing: easeOutBack;");var i=o.clickAction;console.log("in button, clickActionFunctionName: "+i);var r=window[i];"function"==typeof r&&r(e)}),e.setAttribute("role","button")},play:function(){},update:function(t){console.log("In button update, toggle: "+this.toggleState)},setActiveState:function(t){console.log("in setActiveState function"),this.data.toggle=this.toggleState=t,t||this.buttonEntity.setAttribute("material","color",this.data.backgroundColor)}}),AFRAME.registerPrimitive("a-gui-icon-button",{defaultComponents:{"gui-interactable":{},"gui-item":{type:"icon-button"},"gui-icon-button":{}},mappings:{onclick:"gui-interactable.clickAction",onhover:"gui-interactable.hoverAction","key-code":"gui-interactable.keyCode",width:"gui-item.width",height:"gui-item.height",margin:"gui-item.margin",on:"gui-icon-button.on","font-color":"gui-icon-button.fontColor","font-family":"gui-icon-button.fontFamily","border-color":"gui-icon-button.borderColor","background-color":"gui-icon-button.backgroundColor","hover-color":"gui-icon-button.hoverColor","active-color":"gui-icon-button.activeColor",toggle:"gui-icon-button.toggle",icon:"gui-icon-button.icon","icon-font-size":"gui-icon-button.iconFontSize","icon-active":"gui-icon-button.iconActive"}})},function(t,e,i){"use strict";AFRAME.registerComponent("gui-icon-label-button",{schema:{on:{default:"click"},icon:{type:"string",default:""},iconActive:{type:"string",default:""},iconFontSize:{type:"string",default:"400px"},text:{type:"string",default:""},toggle:{type:"boolean",default:!1},fontSize:{type:"string",default:"150px"},fontFamily:{type:"string",default:"Arial"},fontColor:{type:"string",default:key_offwhite},borderColor:{type:"string",default:key_offwhite},backgroundColor:{type:"string",default:key_grey},hoverColor:{type:"string",default:key_grey_dark},activeColor:{type:"string",default:key_orange}},init:function(){var t=this.data,e=this.el,i=e.getAttribute("gui-item");this.toggleState=t.toggle;e.setAttribute("geometry","primitive: plane; height: "+i.height+"; width: "+i.width+";"),e.setAttribute("material","shader: flat; side:front; color:"+t.backgroundColor+";");var o=document.createElement("a-entity");o.setAttribute("geometry","primitive: box; width: "+i.width+"; height: "+i.height+"; depth: 0.02;"),o.setAttribute("material","shader: flat; opacity: 1; side:double; color: "+t.borderColor),o.setAttribute("rotation","0 0 0"),o.setAttribute("position","0 0 0.01"),e.appendChild(o);var r=document.createElement("a-entity");r.setAttribute("geometry","primitive: box; width: "+(i.width-.025)+"; height: "+(i.height-.025)+"; depth: 0.04;"),r.setAttribute("material","shader: flat; opacity: 1; side:double; color: "+t.backgroundColor),r.setAttribute("rotation","0 0 0"),r.setAttribute("position","0 0 0.02"),e.appendChild(r),this.buttonEntity=r;var a=1024;if(""!=t.text)var a=512;var n=document.createElement("div");n.setAttribute("class","visuallyhidden"),document.body.appendChild(n);var l=i.height*a,s=i.height*a,u=document.createElement("canvas");this.iconCanvas=u,u.className="visuallyhidden",u.setAttribute("width",l),u.setAttribute("height",s),u.id=getUniqueId("canvasIcon"),n.appendChild(u);var d=this.ctxIcon=u.getContext("2d");drawIcon(d,u,t.iconFontSize,t.icon,t.fontColor,1);var c=0;""!=t.text&&(c=.5*-i.width+.5*i.height);var h=document.createElement("a-entity");if(""!=t.text?h.setAttribute("geometry","primitive: plane; width: "+i.height/2+"; height: "+i.height/2+";"):h.setAttribute("geometry","primitive: plane; width: "+i.width/2+"; height: "+i.height/2+";"),h.setAttribute("material","shader: flat; src: #"+u.id+"; transparent: true; opacity: 1; side:front;"),h.setAttribute("position",c+" 0 0.041"),e.appendChild(h),""!=t.text){var g=i.width-i.height,p=g*a,m=i.height*a,b=document.createElement("canvas");this.labelCanvas=b,b.setAttribute("width",p),b.setAttribute("height",m),b.id=getUniqueId("canvasLabel"),n.appendChild(b);this.ctxLabel=b.getContext("2d");drawText(this.ctxLabel,this.labelCanvas,t.text,t.fontSize,t.fontFamily,t.fontColor,1,"left","middle");var f=.5*i.height-.05*i.width,y=document.createElement("a-entity");y.setAttribute("geometry","primitive: plane; width: "+g+"; height: "+i.height/1.05+";"),y.setAttribute("material","shader: flat; src: #"+b.id+"; transparent: true; opacity: 1; side:front;"),y.setAttribute("position",f+" 0 0.041"),e.appendChild(y)}e.addEventListener("mouseenter",function(e){r.removeAttribute("animation__leave"),r.setAttribute("animation__enter","property: material.color; from: "+t.backgroundColor+"; to:"+t.hoverColor+"; dur:200;")}),e.addEventListener("mouseleave",function(e){t.toggle||r.removeAttribute("animation__click"),r.removeAttribute("animation__enter"),r.setAttribute("animation__leave","property: material.color; from: "+t.hoverColor+"; to:"+t.backgroundColor+"; dur:200; easing: easeOutQuad;")}),e.addEventListener(t.on,function(i){t.toggle?r.setAttribute("material","color",t.activeColor):r.setAttribute("animation__click","property: material.color; from: "+t.activeColor+"; to:"+t.backgroundColor+"; dur:400; easing: easeOutQuad;");var o=e.getAttribute("gui-interactable"),a=o.clickAction;console.log("in button, clickActionFunctionName: "+a);var n=window[a];"function"==typeof n&&n(i)}),e.setAttribute("role","button")},play:function(){},update:function(t){console.log("In button update, toggle: "+this.toggleState)}}),AFRAME.registerPrimitive("a-gui-icon-label-button",{defaultComponents:{"gui-interactable":{},"gui-item":{type:"icon-label-button"},"gui-icon-label-button":{}},mappings:{onclick:"gui-interactable.clickAction",onhover:"gui-interactable.hoverAction","key-code":"gui-interactable.keyCode",width:"gui-item.width",height:"gui-item.height",margin:"gui-item.margin",on:"gui-icon-label-button.on","font-color":"gui-icon-label-button.fontColor","font-family":"gui-icon-label-button.fontFamily","font-size":"gui-icon-label-button.fontSize","border-color":"gui-icon-label-button.borderColor","background-color":"gui-icon-label-button.backgroundColor","hover-color":"gui-icon-label-button.hoverColor","active-color":"gui-icon-label-button.activeColor",toggle:"gui-icon-label-button.toggle",icon:"gui-icon-label-button.icon","icon-active":"gui-icon-label-button.iconActive","icon-font-size":"gui-icon-label-button.iconFontSize",value:"gui-icon-label-button.text"}})},function(t,e,i){"use strict";AFRAME.registerComponent("gui-input",{schema:{align:{type:"string",default:"left"},on:{default:"click"},text:{type:"string",default:""},toggle:{type:"boolean",default:!1},fontSize:{type:"string",default:"150px"},fontFamily:{type:"string",default:"Arial"},fontColor:{type:"string",default:key_grey_dark},fontWeight:{type:"string",default:"normal"},borderColor:{type:"string",default:key_grey_dark},borderHoverColor:{type:"string",default:key_grey},backgroundColor:{type:"string",default:key_offwhite},hoverColor:{type:"string",default:key_white},activeColor:{type:"string",default:key_orange}},init:function(){var t=this.data,e=this.el,i=e.getAttribute("gui-item"),o=512,r=i.width*o,a=i.height*o,n=document.createElement("div");n.setAttribute("class","visuallyhidden"),document.body.appendChild(n);var l=document.createElement("canvas");this.canvas=l,l.className="visuallyhidden",l.setAttribute("width",r),l.setAttribute("height",a),l.id=getUniqueId("canvas"),n.appendChild(l);var s=this.ctx=l.getContext("2d");e.setAttribute("geometry","primitive: plane; height: "+i.height+"; width: "+i.width+";"),e.setAttribute("material","shader: flat; transparent: false; side:front; color:"+t.backgroundColor+";"),this.oldText=t.text,drawText(s,l,t.text,t.fontSize,t.fontFamily,t.fontColor,1,t.align,"middle",t.fontWeight),this.inputEntity&&e.removeChild(this.inputEntity);var u=document.createElement("a-entity");u.setAttribute("geometry","primitive: plane; width: "+i.width/1.05+"; height: "+i.height/1.05+";"),u.setAttribute("material","shader: flat; src: #"+l.id+"; transparent: true; opacity: 1; side:front;"),u.setAttribute("position","0 0 0.01"),this.inputEntity=u,e.appendChild(u);var d=document.createElement("a-entity");d.setAttribute("geometry","primitive: box; width: "+i.width+"; height: 0.05; depth: 0.02;"),d.setAttribute("material","shader: flat; opacity: 1; side:double; color: "+t.borderColor),d.setAttribute("position","0 -"+(i.height/2-.025)+" 0.01"),e.appendChild(d);var c=document.createElement("a-entity");c.setAttribute("geometry","primitive: box; width: "+i.width+"; height: 0.05; depth: 0.02;"),c.setAttribute("material","shader: flat; opacity: 1; side:double; color: "+t.borderColor),c.setAttribute("position","0 "+(i.height/2-.025)+" 0.01"),e.appendChild(c);var h=document.createElement("a-entity");h.setAttribute("geometry","primitive: box; width: 0.05; height: "+i.height+"; depth: 0.02;"),h.setAttribute("material","shader: flat; opacity: 1; side:double; color: "+t.borderColor),h.setAttribute("position","-"+(i.width/2-.025)+" 0 0.01"),e.appendChild(h);var g=document.createElement("a-entity");g.setAttribute("geometry","primitive: box; width: 0.05; height: "+i.height+"; depth: 0.02;"),g.setAttribute("material","shader: flat; opacity: 1; side:double; color: "+t.borderColor),g.setAttribute("position",i.width/2-.025+" 0 0.01"),e.appendChild(g),e.setAttribute("role","input"),e.addEventListener("mouseenter",function(i){e.setAttribute("material","color",t.hoverColor),d.setAttribute("material","color",t.borderHoverColor),c.setAttribute("material","color",t.borderHoverColor),h.setAttribute("material","color",t.borderHoverColor),g.setAttribute("material","color",t.borderHoverColor)}),e.addEventListener("mouseleave",function(i){e.setAttribute("material","color",t.backgroundColor),d.setAttribute("material","color",t.borderColor),c.setAttribute("material","color",t.borderColor),h.setAttribute("material","color",t.borderColor),g.setAttribute("material","color",t.borderColor)}),e.addEventListener(t.on,function(t){console.log("I was clicked at: ",t.detail.intersection.point);var i=e.getAttribute("gui-interactable");console.log("guiInteractable: "+i);var o=i.clickAction;console.log("clickActionFunctionName: "+o);var r=window[o];"function"==typeof r&&r(t)})},play:function(){},update:function(t){this.init()},tick:function(){this.data.text!==this.oldText&&(this.oldText=this.data.text,drawText(this.ctx,this.canvas,this.data.text,this.data.fontSize,this.data.fontFamily,this.data.fontColor,1,data.align,"middle",this.data.fontWeight))},appendText:function(t){var e=this.data.text+t;this.el.setAttribute("gui-input","text",e)},delete:function(){if(this.data.text&&this.data.text.length>0){var t=this.data.text.slice(0,-1);this.el.setAttribute("gui-input","text",t)}}}),AFRAME.registerPrimitive("a-gui-input",{defaultComponents:{"gui-interactable":{},"gui-item":{type:"input"},"gui-input":{}},mappings:{"background-color":"gui-input.backgroundColor","border-color":"gui-input.borderColor","border-hover-color":"gui-input.borderHoverColor","font-color":"gui-input.fontColor","font-family":"gui-input.fontFamily","font-size":"gui-input.fontSize",height:"gui-item.height","hover-color":"gui-input.hoverColor",onclick:"gui-interactable.clickAction",onhover:"gui-interactable.hoverAction",width:"gui-item.width",margin:"gui-item.margin",value:"gui-input.inputText"}})},function(t,e,i){"use strict";AFRAME.registerComponent("gui-interactable",{schema:{clickAction:{type:"string"},hoverAction:{type:"string"},keyCode:{type:"number",default:null},key:{type:"string",default:null}},init:function(){var t=this.data,e=this.el;t.keyCode&&window.addEventListener("keydown",function(i){i.key==t.key?e.emit("click"):i.keyCode==t.keyCode&&e.emit("click"),i.preventDefault()},!0)},update:function(){},tick:function(){},remove:function(){},pause:function(){},play:function(){},setClickAction:function(t){this.data.clickAction=t}})},function(t,e,i){"use strict";AFRAME.registerComponent("gui-item",{schema:{type:{type:"string"},width:{type:"number",default:1},height:{type:"number",default:1},margin:{type:"vec4",default:"0 0 0 0"}},init:function(){},update:function(){},tick:function(){},remove:function(){},pause:function(){},play:function(){}})},function(t,e,i){"use strict";AFRAME.registerComponent("gui-label",{schema:{text:{type:"string",default:"label text"},align:{type:"string",default:"center"},labelFor:{type:"selector",default:null},fontSize:{type:"string",default:"150px"},fontFamily:{type:"string",default:"Helvetica"},fontColor:{type:"string",default:key_grey_dark},fontWeight:{type:"string",default:"normal"},backgroundColor:{type:"string",default:key_offwhite},opacity:{type:"number",default:1},textDepth:{type:"number",default:.001}},init:function(){var t=this.data,e=this.el,i=e.getAttribute("gui-item"),o=500,r=i.width*o,a=i.height*o,n=document.createElement("div");this.canvasContainer=n,n.setAttribute("class","visuallyhidden"),n.id=getUniqueId("canvasContainer"),document.body.appendChild(n);var l=document.createElement("canvas");this.canvas=l,l.className="visuallyhidden",l.setAttribute("width",r),l.setAttribute("height",a),l.id=getUniqueId("canvas"),n.appendChild(l);var s=this.ctx=l.getContext("2d");e.setAttribute("geometry","primitive: plane; height: "+i.height+"; width: "+i.width+";"),e.setAttribute("material","shader: flat; side:front; color:"+t.backgroundColor+"; transparent: true; opacity: "+t.opacity+"; alphaTest: 0.5;"),this.oldText=t.text,drawText(s,l,t.text,t.fontSize,t.fontFamily,t.fontColor,1,t.align,"middle",t.fontWeight),this.textEntity&&e.removeChild(this.textEntity);var u=document.createElement("a-entity");this.textEntity=u,u.setAttribute("geometry","primitive: plane; width: "+i.width/1.05+"; height: "+i.height/1.05+";"),u.setAttribute("material","shader: flat; src: #"+l.id+"; transparent: true; opacity: 1.0; alphaTest: 0.5; side:front;"),u.setAttribute("position","0 0 "+t.textDepth),e.appendChild(u),t.labelFor},update:function(t){this.init()},tick:function(){this.data.text!==this.oldText&&(this.oldText=this.data.text,drawText(this.ctx,this.canvas,this.data.text,this.data.fontSize,this.data.fontFamily,this.data.fontColor,1,data.align,"middle",this.data.fontWeight))}}),AFRAME.registerPrimitive("a-gui-label",{defaultComponents:{"gui-item":{type:"label"},"gui-label":{}},mappings:{width:"gui-item.width",height:"gui-item.height",margin:"gui-item.margin",on:"gui-button.on",align:"gui-label.align",value:"gui-label.text","label-for":"gui-label.labelFor","font-size":"gui-label.fontSize","font-color":"gui-label.fontColor","font-family":"gui-label.fontFamily","font-weight":"gui-label.fontWeight","background-color":"gui-label.backgroundColor",opacity:"gui-label.opacity","text-depth":"gui-label.textDepth"}})},function(t,e,i){"use strict";AFRAME.registerComponent("gui-progressbar",{schema:{backgroundColor:{type:"string",default:key_grey},activeColor:{type:"string",default:key_orange}},init:function(){var t=this.data,e=this.el,i=e.getAttribute("gui-item");e.setAttribute("geometry","primitive: plane; height: "+i.height+"; width: "+i.width+";"),e.setAttribute("material","shader: flat; opacity: 1;  color: "+t.backgroundColor+"; side:front;");var o=document.createElement("a-entity");o.setAttribute("geometry","primitive: box; width: 0.04; height: "+i.height+"; depth: 0.02;"),o.setAttribute("material","shader: flat; opacity: 1; side:double; color: "+t.activeColor),o.setAttribute("position",-i.width/2+" 0 0.01"),o.id="progress_meter",e.appendChild(o)},update:function(){},tick:function(){},remove:function(){},pause:function(){},play:function(){}}),AFRAME.registerPrimitive("a-gui-progressbar",{defaultComponents:{"gui-item":{type:"progressbar"},"gui-progressbar":{}},mappings:{width:"gui-item.width",height:"gui-item.height",margin:"gui-item.margin","background-color":"gui-progressbar.backgroundColor","active-color":"gui-progressbar.activeColor"}})},function(t,e,i){"use strict";AFRAME.registerComponent("gui-radio",{schema:{on:{default:"click"},text:{type:"string",default:"text"},active:{type:"boolean",default:!0},checked:{type:"boolean",default:!1},radiosizecoef:{type:"number",default:1},fontSize:{type:"string",default:"150px"},fontFamily:{type:"string",default:"Arial"},fontColor:{type:"string",default:key_grey_dark},borderColor:{type:"string",default:key_white},backgroundColor:{type:"string",default:key_offwhite},hoverColor:{type:"string",default:key_grey_light},activeColor:{type:"string",default:key_orange},handleColor:{type:"string",default:key_grey}},init:function(){var t=this.data,e=this.el,i=e.getAttribute("gui-item"),o=.5*-i.width+.5*i.height,r=document.createElement("a-cylinder");r.setAttribute("radius",.2*i.height*t.radiosizecoef),r.setAttribute("height","0.01"),r.setAttribute("rotation","90 0 0"),r.setAttribute("material","color:"+t.handleColor+"; shader: flat;"),r.setAttribute("position",o+" 0 0"),e.appendChild(r);var a=document.createElement("a-torus");a.setAttribute("radius",.19*i.height*t.radiosizecoef),a.setAttribute("radius-tubular","0.01"),a.setAttribute("rotation","90 0 0"),a.setAttribute("material","color:"+t.borderColor+"; shader: flat;"),r.appendChild(a);var n=document.createElement("a-cylinder");n.setAttribute("radius",.18*i.height*t.radiosizecoef),n.setAttribute("height","0.02"),n.setAttribute("rotation","0 0 0"),n.setAttribute("material","color:"+t.handleColor+"; shader: flat;"),r.appendChild(n);var l=i.width-i.height,s=512,u=l*s,d=i.height*s,c=document.createElement("div");c.setAttribute("class","visuallyhidden"),document.body.appendChild(c);var h=document.createElement("canvas");this.labelCanvas=h,h.className="visuallyhidden",h.setAttribute("width",u),h.setAttribute("height",d),h.id=getUniqueId("canvas"),c.appendChild(h);var g=this.ctxLabel=h.getContext("2d");e.setAttribute("material","shader: flat; depthTest:true;transparent: false; opacity: 1;  color: "+this.data.backgroundColor+"; side:front;"),e.setAttribute("geometry","primitive: plane; height: "+i.height+"; width: "+i.height+";"),drawText(g,h,t.text,t.fontSize,t.fontFamily,t.fontColor,1,"left","middle");var p=.5*i.height-.05*i.width,m=document.createElement("a-entity");m.setAttribute("geometry","primitive: plane; width: "+l+"; height: "+i.height/1.05+";"),m.setAttribute("material","shader: flat; src: #"+h.id+"; transparent: true; opacity: 1; side:front;"),m.setAttribute("position",p+" 0 0.02"),e.appendChild(m),this.updateToggle(t.active),e.setAttribute("checked",t.active),e.addEventListener("mouseenter",function(e){a.removeAttribute("animation__leave"),a.setAttribute("animation__enter","property: material.color; from: "+t.borderColor+"; to:"+t.hoverColor+"; dur:200;")}),e.addEventListener("mouseleave",function(e){a.removeAttribute("animation__enter"),a.setAttribute("animation__leave","property: material.color; from: "+t.hoverColor+"; to:"+t.borderColor+"; dur:200; easing: easeOutQuad;")}),e.addEventListener(t.on,function(i){t.checked=!t.checked,t.checked?(n.removeAttribute("animation__colorOut"),n.removeAttribute("animation__rotationOut"),n.removeAttribute("animation__position1Out"),n.removeAttribute("animation__position2Out"),n.setAttribute("animation__colorIn","property: material.color; from: "+t.handleColor+"; to:"+t.activeColor+"; dur:500; easing:easeInOutCubic;"),n.setAttribute("animation__rotationIn","property: rotation; from: 0 0 0; to:-180 0 0; dur:500; easing:easeInOutCubic;"),n.setAttribute("animation__position1In","property: position; from: 0 0 0; to:0 0.3 0; dur:200; easing:easeInOutCubic;"),n.setAttribute("animation__position2In","property: position; from: 0 0.3 0; to:0 0 0; dur:200; easing:easeInOutCubic; delay:300;")):(n.removeAttribute("animation__colorIn"),n.removeAttribute("animation__rotationIn"),n.removeAttribute("animation__position1In"),n.removeAttribute("animation__position2In"),n.setAttribute("animation__colorOut","property: material.color; from: "+t.activeColor+"; to:"+t.handleColor+"; dur:500; easing:easeInOutCubic;"),n.setAttribute("animation__rotationOut","property: rotation; from: -180 0 0; to:0 0 0; dur:500; easing:easeInOutCubic;"),n.setAttribute("animation__position1Out","property: position; from: 0 0 0; to:0 0.3 0; dur:200; easing:easeInOutCubic; "),n.setAttribute("animation__position2Out","property: position; from: 0 0.3 0; to:0 0 0; dur:200; easing:easeInOutCubic; delay:300;"));var o=e.getAttribute("gui-interactable"),r=o.clickAction,a=window[r];"function"==typeof a&&a(i)}),e.setAttribute("role","radio")},update:function(){var t=this.data;this.updateToggle(t.active)},updateToggle:function(t){}}),AFRAME.registerPrimitive("a-gui-radio",{defaultComponents:{"gui-interactable":{},"gui-item":{type:"radio"},"gui-radio":{}},mappings:{onclick:"gui-interactable.clickAction",onhover:"gui-interactable.hoverAction","key-code":"gui-interactable.keyCode",width:"gui-item.width",height:"gui-item.height",margin:"gui-item.margin",on:"gui-radio.on",value:"gui-radio.text",active:"gui-radio.active",checked:"gui-radio.checked","font-color":"gui-radio.fontColor","font-size":"gui-radio.fontSize","font-family":"gui-radio.fontFamily","border-color":"gui-radio.borderColor","background-color":"gui-radio.backgroundColor","hover-color":"gui-radio.hoverColor","active-color":"gui-radio.activeColor","handle-color":"gui-radio.handleColor",radiosizecoef:"gui-radio.radiosizecoef"}})},function(t,e,i){"use strict";AFRAME.registerComponent("gui-slider",{schema:{activeColor:{type:"string",default:key_orange},backgroundColor:{type:"string",default:key_offwhite},borderColor:{type:"string",default:key_grey},handleColor:{type:"string",default:key_white},handleInnerDepth:{type:"number",default:"0.02"},handleInnerRadius:{type:"number",default:"0.13"},handleOuterDepth:{type:"number",default:"0.04"},handleOuterRadius:{type:"number",default:"0.17"},hoverColor:{type:"string",default:key_grey_light},leftRightPadding:{type:"number",default:"0.25"},percent:{type:"number",default:"0.5"},sliderBarHeight:{type:"number",default:"0.05"},sliderBarDepth:{type:"number",default:"0.03"},topBottomPadding:{type:"number",default:"0.125"}},init:function(){var t=this.data,e=this.el,i=e.getAttribute("gui-item"),o=i.width-2*t.leftRightPadding;i.height,t.topBottomPadding;e.setAttribute("geometry","primitive: plane; height: "+i.height+"; width: "+i.height+";"),e.setAttribute("material","shader: flat; opacity: 1;  color: "+t.backgroundColor+"; side:front;");var r=document.createElement("a-entity");r.setAttribute("geometry","primitive: box; width: "+t.percent*o+"; height: "+t.sliderBarHeight+"; depth: "+t.sliderBarDepth+";"),r.setAttribute("material","shader: flat; opacity: 1; side:double; color: "+t.activeColor+";"),r.setAttribute("position",t.percent-.5*o+" 0 "+(t.sliderBarDepth-.01)),e.appendChild(r);var a=document.createElement("a-entity");a.setAttribute("geometry","primitive: box; width: "+(o-t.percent*o)+"; height: "+t.sliderBarHeight+"; depth: "+t.sliderBarDepth+";"),a.setAttribute("material","shader: flat; opacity: 1; side:double; color: "+t.borderColor+";"),a.setAttribute("position",t.percent*o*.5+" 0 "+(t.sliderBarDepth-.01)),e.appendChild(a);var n=document.createElement("a-entity");n.setAttribute("geometry","primitive: cylinder; radius: "+t.handleOuterRadius+"; height: "+t.handleOuterDepth+";"),n.setAttribute("material","shader: flat; opacity: 1; side:double; color: "+t.borderColor+";"),n.setAttribute("rotation","90 0 0"),n.setAttribute("position",t.percent*o-.5*o+" 0 "+(t.handleOuterDepth-.01)),e.appendChild(n);var l=document.createElement("a-entity");l.setAttribute("geometry","primitive: cylinder; radius: "+t.handleInnerRadius+"; height: "+t.handleInnerDepth+";"),l.setAttribute("material","shader: flat; opacity: 1; side:double; color: "+t.handleColor+";"),l.setAttribute("position","0 "+t.handleInnerDepth+" 0"),n.appendChild(l),e.addEventListener("mouseenter",function(){l.setAttribute("material","color",t.hoverColor)}),e.addEventListener("mouseleave",function(){l.setAttribute("material","color",t.handleColor)}),e.addEventListener("click",function(i){console.log("I was clicked at: ",i.detail.intersection.point);var o=e.object3D.worldToLocal(i.detail.intersection.point);console.log("local coordinates: ",o),console.log("current percent: "+t.percent);var l=2;o.x<=-l/2?t.percent=0:o.x>=l/2?t.percent=1:t.percent=(o.x+l/2)/l,console.log("handle container: "+n),r.setAttribute("geometry","primitive: box; width: "+2*t.percent+"; height: 0.05; depth: 0.03;"),r.setAttribute("position",t.percent-1+" 0 0.02"),a.setAttribute("geometry","primitive: box; width: "+(2-2*t.percent)+"; height: 0.05; depth: 0.03;"),a.setAttribute("position",1*t.percent+" 0 0.02"),n.setAttribute("position",2*t.percent-1+" 0 0.03");var s=e.getAttribute("gui-interactable");console.log("guiInteractable: "+s);var u=s.clickAction;console.log("clickActionFunctionName: "+u);var d=window[u];"function"==typeof d&&d(i,t.percent)})},update:function(){},tick:function(){},remove:function(){},pause:function(){},play:function(){}}),AFRAME.registerPrimitive("a-gui-slider",{defaultComponents:{"gui-interactable":{},"gui-item":{type:"slider"},"gui-slider":{}},mappings:{"active-color":"gui-slider.activeColor","background-color":"gui-slider.backgroundColor","border-color":"gui-slider.borderColor","handle-color":"gui-slider.handleColor","handle-inner-depth":"gui-slider.handleInnerDepth","handle-inner-radius":"gui-slider.handleInnerRadius","handle-outer-depth":"gui-slider.handleOuterDepth","handle-outer-radius":"gui-slider.handleOuterRadius",height:"gui-item.height","hover-color":"gui-slider.hoverColor","key-code":"gui-interactable.keyCode","left-right-padding":"gui-slider.leftRightPadding",margin:"gui-item.margin",onclick:"gui-interactable.clickAction",onhover:"gui-interactable.hoverAction",percent:"gui-slider.percent","slider-bar-depth":"gui-slider.sliderBarDepth","slider-bar-height":"gui-slider.sliderBarHeight","top-bottom-padding":"gui-slider.topBottomPadding",width:"gui-item.width"}})},function(t,e,i){"use strict";AFRAME.registerComponent("gui-toggle",{schema:{on:{default:"click"},text:{type:"string",default:"text"},active:{type:"boolean",default:!0},checked:{type:"boolean",default:!1},borderWidth:{type:"number",default:1},fontSize:{type:"string",default:"150px"},fontFamily:{type:"string",default:"Arial"},fontColor:{type:"string",default:key_grey_dark},borderColor:{type:"string",default:key_grey},backgroundColor:{type:"string",default:key_offwhite},hoverColor:{type:"string",default:key_grey_light},activeColor:{type:"string",default:key_orange},handleColor:{type:"string",default:key_offwhite}},init:function(){var t=this.data,e=this.el,i=e.getAttribute("gui-item"),o=i.height/1.75,r=.5*-i.width+i.height/2,a=document.createElement("a-box");a.setAttribute("width",o),a.setAttribute("height",.5*i.height),a.setAttribute("depth","0.01"),a.setAttribute("material","color:"+t.borderColor+"; shader: flat;"),a.setAttribute("position",r+" 0 0"),e.appendChild(a);var n=i.height/5,l=.5*-i.height+2*n,s=.5*i.height-2*n,u=document.createElement("a-box");u.setAttribute("width",""+n),u.setAttribute("height",.4*i.height),u.setAttribute("depth","0.02"),u.setAttribute("material","color:"+t.handleColor),u.setAttribute("position",l+" 0 0.02"),a.appendChild(u);var d=i.width-i.height,c=512,h=d*c,g=i.height*c,p=document.createElement("div");p.setAttribute("class","visuallyhidden"),document.body.appendChild(p);var m=document.createElement("canvas");this.labelCanvas=m,m.className="visuallyhidden",m.setAttribute("width",h),m.setAttribute("height",g),m.id=getUniqueId("canvas"),p.appendChild(m);var b=this.ctxLabel=m.getContext("2d");e.setAttribute("material","shader: flat; depthTest:true;transparent: false; opacity: 1;  color: "+this.data.backgroundColor+"; side:front;"),e.setAttribute("geometry","primitive: plane; height: "+i.height+"; width: "+i.height+";"),drawText(b,m,t.text,t.fontSize,t.fontFamily,t.fontColor,1,"left","middle");var f=.5*i.height-.05*i.width,y=document.createElement("a-entity");y.setAttribute("geometry","primitive: plane; width: "+d+"; height: "+i.height/1.05+";"),y.setAttribute("material","shader: flat; src: #"+m.id+"; transparent: true; opacity: 1; side:front;"),y.setAttribute("position",f+" 0 0.02"),e.appendChild(y),this.updateToggle(t.active),e.addEventListener("mouseenter",function(e){u.removeAttribute("animation__leave"),u.setAttribute("animation__enter","property: material.color; from: "+t.handleColor+"; to:"+t.hoverColor+"; dur:200;")}),e.addEventListener("mouseleave",function(e){u.removeAttribute("animation__enter"),u.setAttribute("animation__leave","property: material.color; from: "+t.hoverColor+"; to:"+t.handleColor+"; dur:200; easing: easeOutQuad;")}),e.addEventListener("check",function(e){t.checked||(t.checked=!0)}),e.addEventListener("uncheck",function(e){t.checked&&(t.checked=!1)}),e.addEventListener(t.on,function(i){console.log("I was clicked at: ",i.detail.intersection.point),t.checked=!t.checked,t.checked?(a.removeAttribute("animation__colorOut"),u.removeAttribute("animation__positionOut"),a.setAttribute("animation__colorIn","property: material.color; from: "+t.borderColor+"; to:"+t.activeColor+"; dur:200; easing:easeInOutCubic;"),u.setAttribute("animation__positionIn","property: position; from: "+l+" 0 0.02; to:"+s+" 0 0.02; dur:200; easing:easeInOutCubic;")):(a.removeAttribute("animation__colorIn"),u.removeAttribute("animation__positionIn"),a.setAttribute("animation__colorOut","property: material.color; from: "+t.activeColor+"; to:"+t.borderColor+"; dur:200; easing:easeInOutCubic;"),u.setAttribute("animation__positionOut","property: position; from: "+s+" 0 0.02; to:"+l+" 0 0.02; dur:200; easing:easeInOutCubic;"));var o=e.getAttribute("gui-interactable");console.log("guiInteractable: "+o);var r=o.clickAction;console.log("clickActionFunctionName: "+r);var n=window[r];"function"==typeof n&&n(i)})},update:function(){var t=this.data;this.updateToggle(t.active)},updateToggle:function(t){}}),AFRAME.registerPrimitive("a-gui-toggle",{defaultComponents:{"gui-interactable":{},"gui-item":{type:"toggle"},"gui-toggle":{}},mappings:{onclick:"gui-interactable.clickAction",onhover:"gui-interactable.hoverAction","key-code":"gui-interactable.keyCode",width:"gui-item.width",height:"gui-item.height",margin:"gui-item.margin",on:"gui-toggle.on",active:"gui-toggle.active",checked:"gui-toggle.checked",value:"gui-toggle.text","font-color":"gui-toggle.fontColor","font-family":"gui-toggle.fontFamily","font-size":"gui-toggle.fontSize","border-width":"gui-toggle.borderWidth","border-color":"gui-toggle.borderColor","background-color":"gui-toggle.backgroundColor","hover-color":"gui-toggle.hoverColor","active-color":"gui-toggle.activeColor","handle-color":"gui-toggle.handleColor"}})},function(t,e,i){"use strict";AFRAME.registerComponent("gui-vertical-slider",{schema:{activeColor:{type:"string",default:key_orange},backgroundColor:{type:"string",default:key_offwhite},borderColor:{type:"string",default:key_grey},handleColor:{type:"string",default:key_white},handleInnerDepth:{type:"number",default:.02},handleInnerRadius:{type:"number",default:.13},handleOuterDepth:{type:"number",default:.04},handleOuterRadius:{type:"number",default:.17},hoverColor:{type:"string",default:key_grey_light},hoverFontSize:{type:"number",default:100},hoverHeight:{type:"number",default:.35},hoverPercent:{type:"number"},hoverWidth:{type:"number",default:.7},hoverMargin:{type:"vec4",default:{x:0,y:0,z:0,w:0}},leftRightPadding:{type:"number",default:.125},percent:{type:"number",default:.5},opacity:{type:"number",default:1},outputFontSize:{type:"string",default:"180px"},outputFunction:{type:"string"},outputHeight:{type:"number",default:1},outputMargin:{type:"vec4",default:{x:0,y:0,z:0,w:0}},outputTextDepth:{type:"number",default:.25},outputWidth:{type:"number",default:1},sliderBarDepth:{type:"number",default:.03},sliderBarWidth:{type:"number",default:.08},topBottomPadding:{type:"number",default:.25}},init:function(){var t=this,e=this.data,i=this.el,o=i.getAttribute("gui-item"),r=(o.width,e.leftRightPadding,o.height-2*e.topBottomPadding);this.sliderHeight=r,i.setAttribute("geometry","primitive: plane; height: "+o.height+"; width: "+o.width+";"),i.setAttribute("material","shader: flat; opacity: "+e.opacity+";  alphaTest: 0.5; color: "+e.backgroundColor+"; side:front;"),console.log("**** in vertical slider init, percent: "+e.percent+", sliderHeight: "+r);var a=document.createElement("a-entity");a.setAttribute("geometry","primitive: box; height: "+e.percent*r+"; width: "+e.sliderBarWidth+"; depth: "+e.sliderBarDepth+";"),a.setAttribute("material","shader: flat; opacity: 1; side:double; color: "+e.activeColor+";"),a.setAttribute("position","0 "+(e.percent*r-.5*r-e.percent*r*.5)+" "+(e.sliderBarDepth-.01)),this.sliderActiveBar=a,i.appendChild(a);var n=document.createElement("a-entity");n.setAttribute("geometry","primitive: box; height: "+(r-e.percent*r)+"; width: "+e.sliderBarWidth+"; depth: "+e.sliderBarDepth+";"),n.setAttribute("material","shader: flat; opacity: 1; alphaTest: 0.5; side:double; color:"+e.borderColor+";"),n.setAttribute("position","0 "+e.percent*r*.5+" "+(e.sliderBarDepth-.01)),this.sliderBar=n,i.appendChild(n);var l=document.createElement("a-entity");l.setAttribute("geometry","primitive: cylinder; radius: "+e.handleOuterRadius+"; height: "+e.handleOuterDepth+";"),l.setAttribute("material","shader: flat; opacity: 1; side:double; color: "+e.activeColor+";"),l.setAttribute("rotation","90 0 0"),l.setAttribute("position","0 "+(e.percent*r-.5*r)+" "+(e.handleOuterDepth-.01)),this.handleContainer=l,i.appendChild(l);var s=document.createElement("a-entity");s.setAttribute("geometry","primitive: cylinder; radius: "+e.handleInnerRadius+"; height: "+e.handleInnerDepth+";"),s.setAttribute("material","shader: flat; opacity: 1; side:double; color: "+e.handleColor+";"),s.setAttribute("position","0 "+e.handleInnerDepth+" 0"),l.appendChild(s);var u=document.createElement("a-gui-label");u.setAttribute("width",""+1.4*o.width*e.outputWidth),u.setAttribute("height",""+.7*o.width),u.setAttribute("value",""),u.setAttribute("opacity","1.0"),u.setAttribute("position",1.4*o.width+" 0 "+e.sliderBarDepth),u.setAttribute("rotation","-90 0 0"),u.setAttribute("font-color",e.activeColor),u.setAttribute("font-size",240*o.width+"px"),u.setAttribute("font-weight","bold"),u.setAttribute("text-depth",e.outputTextDepth),this.valueLabel=u,l.appendChild(u);var d=document.createElement("a-entity");d.setAttribute("geometry","primitive: box; height: 0.02; width: "+.5*o.width+"; depth: "+e.sliderBarDepth+";"),d.setAttribute("material","shader: flat; opacity: 1; side:double; color: "+e.activeColor+";"),d.setAttribute("position",.5*-o.width+" 0 "+(e.sliderBarDepth-.01)),d.setAttribute("visible","false"),this.hoverIndicator=d,i.appendChild(d);var c=document.createElement("a-gui-label");c.setAttribute("width",""+o.width*e.hoverWidth),c.setAttribute("height",""+o.width*e.hoverHeight),c.setAttribute("value",""),c.setAttribute("opacity","0.5"),c.setAttribute("position",-o.width*e.hoverWidth+" 0 "+e.sliderBarDepth),c.setAttribute("font-color",e.borderColor),c.setAttribute("font-size",o.width*e.hoverFontSize+"px"),c.setAttribute("text-depth",e.outputTextDepth),this.hoverLabel=c,d.appendChild(c),i.addEventListener("mouseenter",function(){s.setAttribute("material","color",e.hoverColor)}),i.addEventListener("mouseleave",function(){s.setAttribute("material","color",e.handleColor)}),i.addEventListener("click",function(t){var o=i.object3D.worldToLocal(t.detail.intersection.point);console.log("click local coordinates: ",o),console.log("current percent: "+e.percent);var a=null;a=o.y<=-r/2?0:o.y>=r/2?1:(o.y+r/2)/r,console.log("new percent: "+a),i.setAttribute("gui-vertical-slider","percent",String(a)),i.setAttribute("gui-vertical-slider","hoverPercent",String(a)),console.log("handle container: "+l);var n=i.getAttribute("gui-interactable");console.log("guiInteractable: "+n);var s=n.clickAction;console.log("clickActionFunctionName: "+s);var u=window[s];"function"==typeof u&&u(e.percent)}),this.el.addEventListener("raycaster-intersected",function(e){t.raycaster=e.detail.el}),this.el.addEventListener("raycaster-intersected-cleared",function(e){t.raycaster=null,t.hoverIndicator.setAttribute("visible",!1),t.hoverLabel.setAttribute("visible",!1)})},update:function(t){var e=this.data,i=this.el,o=i.getAttribute("gui-item"),r=(o.width,e.leftRightPadding,o.height-2*e.topBottomPadding);if(e.percent!=t.percent&&this.sliderActiveBar&&this.sliderBar&&this.handleContainer){var r=o.height-2*e.topBottomPadding;this.sliderActiveBar.setAttribute("geometry","primitive: box; height: "+e.percent*r+"; width: "+e.sliderBarWidth+"; depth: "+e.sliderBarDepth+";"),this.sliderActiveBar.setAttribute("position","0 "+(e.percent*r-.5*r-e.percent*r*.5)+" "+(e.sliderBarDepth-.01)),this.sliderBar.setAttribute("geometry","primitive: box; width: "+e.sliderBarWidth+"; height: "+(r-e.percent*r)+"; depth: "+e.sliderBarDepth+";"),this.sliderBar.setAttribute("position","0 "+e.percent*r*.5+" "+(e.sliderBarDepth-.01)),this.handleContainer.setAttribute("position","0 "+(e.percent*r-.5*r)+" "+(e.handleOuterDepth-.01));var a=this.getOutputValue(!1);a&&this.valueLabel.setAttribute("value",a),this.hoverIndicator.setAttribute("visible",!1),this.hoverLabel.setAttribute("visible",!1)}else if(e.hoverPercent!=t.hoverPercent&&e.hoverPercent!=e.percent&&this.hoverIndicator){var n=this.getOutputValue(!0);n&&this.hoverLabel.setAttribute("value",n),this.hoverIndicator.setAttribute("position","0 "+(e.hoverPercent*r-.5*r)+" "+(e.sliderBarDepth-.01)),this.hoverIndicator.setAttribute("visible",!0),this.hoverLabel.setAttribute("visible",!0)}},tick:function(){if(this.raycaster){var t=this.el,e=(this.data,this.sliderHeight),i=(this.handleContainer,this.raycaster.components.raycaster.getIntersection(t));if(i){if(this.previousLocalY&&this.previousLocalY==i.point.y)return this.hoverIndicator.setAttribute("visible",!1),void this.hoverLabel.setAttribute("visible",!1);var o=this.el.object3D;o.updateMatrixWorld();var r=new THREE.Vector3,a=new THREE.Quaternion,n=new THREE.Vector3;o.matrixWorld.decompose(r,a,n);var l=new THREE.Vector3;l.x=i.point.x-r.x,l.y=i.point.y-r.y,l.z=i.point.z-r.z,this.previousLocalY=l.y;var s=null;(s=l.y<=-e/2?0:l.y>=e/2?1:(l.y+e/2)/e)!=this.data.hoverPercent&&t.setAttribute("gui-vertical-slider","hoverPercent",String(s));var u=t.getAttribute("gui-interactable"),d=u.hoverAction,c=window[d];"function"==typeof c&&c(s)}}},remove:function(){},pause:function(){},play:function(){},getOutputValue:function(t){var e=window[this.data.outputFunction];if("function"==typeof e){return e(t?this.data.hoverPercent:this.data.percent)}return null}}),AFRAME.registerPrimitive("a-gui-vertical-slider",{defaultComponents:{"gui-interactable":{},"gui-item":{type:"slider"},"gui-vertical-slider":{}},mappings:{"active-color":"gui-vertical-slider.activeColor","background-color":"gui-vertical-slider.backgroundColor","border-color":"gui-vertical-slider.borderColor","handle-color":"gui-vertical-slider.handleColor","handle-inner-depth":"gui-vertical-slider.handleInnerDepth","handle-inner-radius":"gui-vertical-slider.handleInnerRadius","handle-outer-depth":"gui-vertical-slider.handleOuterDepth","handle-outer-radius":"gui-vertical-slider.handleOuterRadius",height:"gui-item.height","hover-color":"gui-vertical-slider.hoverColor","hover-font-size":"gui-vertical-slider.hoverFontSize","hover-height":"gui-vertical-slider.hoverHeight","hover-margin":"gui-vertical-slider.hoverMargin","hover-percent":"gui-vertical-slider.hoverPercent","hover-width":"gui-vertical-slider.hoverWidth","key-code":"gui-interactable.keyCode","left-right-padding":"gui-vertical-slider.leftRightPadding",margin:"gui-item.margin",onclick:"gui-interactable.clickAction",onhover:"gui-interactable.hoverAction",opacity:"gui-vertical-slider.opacity","output-font-size":"gui-vertical-slider.outputFontSize","output-function":"gui-vertical-slider.outputFunction","output-height":"gui-vertical-slider.outputHeight","output-margin":"gui-vertical-slider.outputMargin","output-text-depth":"gui-vertical-slider.outputTextDepth","output-width":"gui-vertical-slider.outputWidth",percent:"gui-vertical-slider.percent","slider-bar-depth":"gui-vertical-slider.sliderBarDepth","slider-bar-width":"gui-vertical-slider.sliderBarWidth","top-bottom-padding":"gui-vertical-slider.topBottomPadding",width:"gui-item.width"}})},function(t,e,i){"use strict";var o=document.querySelector("#cursor");o&&o.addEventListener("stateremoved",function(t){"cursor-fusing"===t.detail.state&&(AFRAME.utils.entity.setComponentProperty(this,"geometry.thetaLength",360),AFRAME.utils.entity.setComponentProperty(this,"material.color",key_white),AFRAME.utils.entity.setComponentProperty(this,"scale","1 1 1"))})},function(t,e,i){"use strict";if("undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");i(0),i(10),i(9),i(5),i(11),i(1),i(6),i(7),i(15),i(13),i(2),i(12),i(3),i(14),i(16),i(8),i(4),i(17)}]);